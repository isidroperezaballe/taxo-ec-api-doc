{
    "variable": [
        {
            "id": "baseUrl",
            "key": "baseUrl",
            "type": "string",
            "name": "string",
            "value": "https:\/\/ec-demo.taxo.co"
        }
    ],
    "info": {
        "name": "Taxo Impuestos API - Documentaci\u00f3n",
        "_postman_id": "63d99128-337f-4013-9bb6-b93c58aae307",
        "description": "Taxo Impuestos API v1 - Gesti\u00f3n de contribuyentes y documentos tributarios",
        "schema": "https:\/\/schema.getpostman.com\/json\/collection\/v2.1.0\/collection.json",
        "version": "1.0.0"
    },
    "item": [
        {
            "name": "Taxpayers",
            "description": "\nAPI endpoints for managing taxpayers and their related data.",
            "item": [
                {
                    "name": "List taxpayers",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers",
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1",
                                    "description": "Page number for pagination. El campo value debe ser al menos 1.",
                                    "disabled": false
                                },
                                {
                                    "key": "per_page",
                                    "value": "20",
                                    "description": "Number of items per page (max 100). El campo value debe ser al menos 1. El campo value no debe ser mayor que 100.",
                                    "disabled": false
                                },
                                {
                                    "key": "sort",
                                    "value": "-created_at",
                                    "description": "Sort field and direction. Prefix with \"-\" for descending order.",
                                    "disabled": false
                                },
                                {
                                    "key": "search",
                                    "value": "Empresa+S.A.",
                                    "description": "Search term to filter by business name or tax number. El campo value no debe ser mayor que 255 caracteres.",
                                    "disabled": false
                                },
                                {
                                    "key": "status",
                                    "value": "1",
                                    "description": "Filter by status (0=inactive, 1=active).",
                                    "disabled": false
                                },
                                {
                                    "key": "iva_period",
                                    "value": "MENSUAL",
                                    "description": "Filter by IVA period (MENSUAL, SEMESTRAL).",
                                    "disabled": false
                                },
                                {
                                    "key": "tax_regime_cat",
                                    "value": "GENERAL",
                                    "description": "Filter by tax regime category.",
                                    "disabled": false
                                },
                                {
                                    "key": "declaration_day",
                                    "value": "10",
                                    "description": "Filter by declaration day (1-28). El campo value debe ser al menos 1. El campo value no debe ser mayor que 28.",
                                    "disabled": false
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers?page=1&per_page=20&sort=-created_at&search=Empresa+S.A.&status=1&iva_period=MENSUAL&tax_regime_cat=GENERAL&declaration_day=10"
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves a paginated list of all taxpayers belonging to the authenticated organization.\nYou can filter and sort the results using query parameters."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Taxpayers retrieved successfully\",\n  \"data\": {\n    \"taxpayers\": [\n      {\n        \"id\": 144,\n        \"ulid\": \"01HZXXX...\",\n        \"tax_number\": \"1726051285001\",\n        \"business_name\": \"EMPRESA DEMO S.A.\",\n        \"trade_name\": \"DEMO\",\n        \"tax_payer_status\": \"ACTIVE\",\n        \"tax_regime\": \"general\",\n        \"tax_regime_cat\": \"general\",\n        \"iva_period\": \"monthly\",\n        \"declaration_day\": 12,\n        \"required_to_keep_accounts\": \"SI\",\n        \"withholding_agent\": \"SI\",\n        \"special_contributor\": \"NO\",\n        \"economic_activity\": \"Actividades de consultor\u00eda de gesti\u00f3n empresarial\",\n        \"start_activities_date\": \"2020-01-15T00:00:00.000000Z\",\n        \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n        \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n      }\n    ]\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"total\": 5,\n      \"count\": 5,\n      \"per_page\": 20,\n      \"current_page\": 1,\n      \"total_pages\": 1\n    },\n    \"filters\": {\n      \"status\": \"ACTIVE\"\n    }\n  }\n}",
                            "name": "Success"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving taxpayers\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server error"
                        }
                    ]
                },
                {
                    "name": "Create a new taxpayer",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers"
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Creates a new taxpayer in your organization after validating that the tax identifier exists\nin the TWS (Tax Web Services) registry. Accepts RUC (13 digits), C\u00e9dula (10 digits), or Passport.\n\nThis endpoint will:\n1. Validate the taxpayer doesn't already exist in your organization\n2. Query the TWS registry API to verify the identifier is valid and active\n3. Create the taxpayer with all available data from TWS\n4. Automatically create default categories for document classification\n5. Set up auto-categorization rules\n\n**Note:** This process may take 5-10 seconds as it queries external services."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 201,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Taxpayer created successfully\",\n  \"data\": {\n    \"taxpayer\": {\n      \"id\": \"01JDXYZ123ABC456DEF789GHI\",\n      \"tax_number\": \"1726051285001\",\n      \"business_name\": \"AGUIRRE MEJIA AIDA ISABEL\",\n      \"legal_name\": \"AGUIRRE MEJIA AIDA ISABEL\",\n      \"email\": null,\n      \"phone\": null,\n      \"status\": 1,\n      \"tax_payer_status\": \"ACTIVO\",\n      \"economic_activity\": \"VENTA AL POR MAYOR DE FRUTAS\",\n      \"tax_regime\": \"GENERAL\",\n      \"tax_regime_cat\": \"general\",\n      \"iva_period\": \"monthly\",\n      \"category\": null,\n      \"required_to_keep_accounts\": \"NO\",\n      \"withholding_agent\": \"NO\",\n      \"special_contributor\": \"NO\",\n      \"declaration_day\": 12,\n      \"next_declaration\": null,\n      \"start_activities_date\": \"2018-09-04\",\n      \"last_sync_at\": null,\n      \"created_at\": \"2024-12-02 15:30:45\",\n      \"updated_at\": \"2024-12-02 15:30:45\"\n    }\n  }\n}",
                            "name": "Taxpayer created successfully"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found in TWS. Please verify the taxpayer ID\",\n  \"code\": \"TAXPAYER_NOT_FOUND_IN_TWS\"\n}",
                            "name": "Taxpayer not found in TWS"
                        },
                        {
                            "header": [],
                            "code": 409,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer already exists for this organization\",\n  \"code\": \"TAXPAYER_ALREADY_EXISTS\"\n}",
                            "name": "Taxpayer already exists"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"taxpayerId\": [\n      \"The taxpayer ID can only contain letters, numbers, and hyphens\"\n    ]\n  }\n}",
                            "name": "Validation error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Failed to create taxpayer due to an internal error\",\n  \"code\": \"INTERNAL_SERVER_ERROR\"\n}",
                            "name": "Internal server error"
                        },
                        {
                            "header": [],
                            "code": 503,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Unable to verify taxpayer with TWS app\",\n  \"code\": \"TWS_SERVICE_UNAVAILABLE\"\n}",
                            "name": "TWS service unavailable"
                        },
                        {
                            "header": [],
                            "code": 504,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"TWS service timeout. Please try again later\",\n  \"code\": \"TWS_SERVICE_TIMEOUT\"\n}",
                            "name": "TWS service timeout"
                        }
                    ]
                },
                {
                    "name": "Get a specific taxpayer",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves detailed information for a specific taxpayer identified by their RUC number.\nThe taxpayer must belong to the authenticated organization."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Taxpayer retrieved successfully\",\n  \"data\": {\n    \"taxpayer\": {\n      \"id\": 144,\n      \"ulid\": \"01HZXXX...\",\n      \"tax_number\": \"1726051285001\",\n      \"business_name\": \"EMPRESA DEMO S.A.\",\n      \"trade_name\": \"DEMO\",\n      \"address\": \"Av. Principal 123 y Secundaria\",\n      \"phone\": \"0987654321\",\n      \"email\": \"contacto@demo.com\",\n      \"legal_representatives\": \"Juan P\u00e9rez, Mar\u00eda Gonz\u00e1lez\",\n      \"economic_activity\": \"Actividades de consultor\u00eda de gesti\u00f3n empresarial\",\n      \"tax_payer_status\": \"ACTIVE\",\n      \"tax_payer_type\": \"PERSONA JUR\u00cdDICA\",\n      \"tax_regime\": \"general\",\n      \"tax_regime_cat\": \"general\",\n      \"category\": null,\n      \"iva_period\": \"monthly\",\n      \"declaration_day\": 12,\n      \"required_to_keep_accounts\": \"SI\",\n      \"withholding_agent\": \"SI\",\n      \"special_contributor\": \"NO\",\n      \"ghost_taxpayer\": \"NO\",\n      \"nonexistent_transactions\": \"NO\",\n      \"start_activities_date\": \"2020-01-15T00:00:00.000000Z\",\n      \"cessation_date\": null,\n      \"restart_activities_date\": null,\n      \"information_update_date\": \"2024-01-15T00:00:00.000000Z\",\n      \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n      \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n    }\n  }\n}",
                            "name": "Success"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving the taxpayer\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server error"
                        }
                    ]
                },
                {
                    "name": "Get taxpayer categories",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/categories",
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1",
                                    "description": "Page number for pagination. El campo value debe ser al menos 1.",
                                    "disabled": false
                                },
                                {
                                    "key": "per_page",
                                    "value": "20",
                                    "description": "Number of items per page (max 100). El campo value debe ser al menos 1. El campo value no debe ser mayor que 100.",
                                    "disabled": false
                                },
                                {
                                    "key": "document_type",
                                    "value": "sales",
                                    "description": "Filter by document type (purchases or sales).",
                                    "disabled": false
                                },
                                {
                                    "key": "category_type",
                                    "value": "commercial_expenses",
                                    "description": "Filter by category type (personal_expenses, commercial_expenses, non_deductible_expenses, sales).",
                                    "disabled": false
                                },
                                {
                                    "key": "enabled",
                                    "value": "1",
                                    "description": "Filter by enabled status (1 or 0).",
                                    "disabled": false
                                },
                                {
                                    "key": "editable",
                                    "value": "1",
                                    "description": "Filter by editable status (1 or 0).",
                                    "disabled": false
                                },
                                {
                                    "key": "search",
                                    "value": "Alimentaci%C3%B3n",
                                    "description": "Search term to filter by name, code, or description. El campo value no debe ser mayor que 255 caracteres.",
                                    "disabled": false
                                },
                                {
                                    "key": "filter[]",
                                    "value": "",
                                    "description": "",
                                    "disabled": true
                                },
                                {
                                    "key": "filter.document_type",
                                    "value": "purchases",
                                    "description": "",
                                    "disabled": false
                                },
                                {
                                    "key": "filter.category_type",
                                    "value": "commercial_expenses",
                                    "description": "",
                                    "disabled": false
                                },
                                {
                                    "key": "filter.enabled",
                                    "value": "",
                                    "description": "",
                                    "disabled": true
                                },
                                {
                                    "key": "filter.editable",
                                    "value": "",
                                    "description": "",
                                    "disabled": true
                                },
                                {
                                    "key": "filter.search",
                                    "value": "vmqeopfuudtdsufvyvddq",
                                    "description": "El campo value no debe ser mayor que 255 caracteres.",
                                    "disabled": false
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/categories?page=1&per_page=20&document_type=sales&category_type=commercial_expenses&enabled=1&editable=1&search=Alimentaci%C3%B3n&filter[]=&filter.document_type=purchases&filter.category_type=commercial_expenses&filter.enabled=&filter.editable=&filter.search=vmqeopfuudtdsufvyvddq",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves a paginated list of categories for a specific taxpayer.\nCategories are used to classify purchase and sales documents."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Categories retrieved successfully\",\n  \"data\": {\n    \"categories\": [\n      {\n        \"id\": 9857,\n        \"name\": \"Alimentaci\u00f3n\",\n        \"code\": \"D-001\",\n        \"description\": null,\n        \"icon\": \"M20 10a5.27...\",\n        \"color\": \"bg-teal-500\",\n        \"document_type\": \"purchases\",\n        \"category_type\": \"personal_expenses\",\n        \"editable\": false,\n        \"has_been_edited\": false,\n        \"enabled\": true,\n        \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n        \"updated_at\": \"2024-01-15T10:30:00.000000Z\",\n        \"archived_at\": null\n      }\n    ]\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"total\": 30,\n      \"count\": 20,\n      \"per_page\": 20,\n      \"current_page\": 1,\n      \"total_pages\": 2\n    },\n    \"filters\": {\n      \"document_type\": \"purchases\",\n      \"enabled\": true\n    }\n  }\n}",
                            "name": "Success"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found or access denied\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Failed to retrieve categories. Please try again later.\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server error"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Emitted Documents",
            "description": "\nAPI endpoints for managing emitted documents (sales documents to customers).\n\n## Document Types\n\nEmitted documents include:\n- **Invoices (Facturas de Venta)**: Sales invoices issued to customers\n- **Credit Notes**: Applied to invoices\n- **Withholdings**: Tax withholding documents received from customers\n\n## Filtering & Categorization\n\n### Date Filtering\n- **Default**: Current month if no dates provided\n- **start_date**: Filter from this date (YYYY-MM-DD)\n- **end_date**: Filter until this date (YYYY-MM-DD)\n\n### Category Filtering\n\nThe system supports both document-level and item-level categorization.\n\n**Category filters:**\n\n- `category_id[]`: Filter by specific category ID(s) - array parameter (can pass multiple)\n  \n  **Searches in:** `invoice_items.tax_payer_category_id` (line item categories)\n  \n  **Note:** To obtain the available category IDs for a taxpayer, use the categories endpoint:\n  `GET \/api\/v1\/taxpayers\/{taxNumber}\/categories?type=sales`\n  \n  Each taxpayer has their own custom categories for sales. You must retrieve the category IDs \n  from this endpoint before filtering by `category_id[]`.\n\n### Regime Filtering\n- `regime`: Filter by tax regime - single value parameter\n  - `general`: General tax regime\n  - `rimpe_entrepreneur`: RIMPE Entrepreneur regime\n  - `rimpe_popular_business`: RIMPE Popular Business regime\n\n### Deductibility Filtering\n- `deductible_type`: Filter by tax deductibility - single value parameter\n  - `deductible`: Tax-deductible (Con derecho a cr\u00e9dito tributario)\n  - `non_deductible`: Non-deductible (Sin derecho a cr\u00e9dito tributario)\n\n### Status Filtering\n- `status`: Filter by document status - single value parameter\n  - `AUTORIZADO`: Authorized\/valid documents\n  - `ANULADO`: Voided documents\n\n### Origin Filtering\n- `origin`: Filter by document origin\/source system - single value parameter\n  - `datil`: Documents issued through Datil integration\n  - `tws`: Documents processed by Taxo Web Services\n  - `xml-import`: Documents manually imported from XML files\n  - `physical-upload`: Physical documents uploaded\/entered manually by user\n\n**Note:** Most filters accept a single value.\nOnly `category_id` accepts multiple values using array notation `category_id[]=123&category_id[]=456`.\n\n## Pagination\n\n- `page`: Page number (default: 1)\n- `per_page`: Items per page, 1-100 (default: 20)",
            "item": [
                {
                    "name": "List emitted documents for a taxpayer",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "page",
                                    "value": "",
                                    "description": "Page number for pagination. Default: 1.",
                                    "disabled": true
                                },
                                {
                                    "key": "per_page",
                                    "value": "",
                                    "description": "Items per page (1-100). Default: 20.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_id%5B%5D",
                                    "value": "",
                                    "description": "Filter by category ID(s). Can pass multiple values using array notation. To obtain available category IDs for the taxpayer, use GET \/api\/v1\/taxpayers\/{taxNumber}\/categories?type=sales.",
                                    "disabled": true
                                },
                                {
                                    "key": "regime",
                                    "value": "",
                                    "description": "Filter by tax regime. Must be one of: general, rimpe_entrepreneur, rimpe_popular_business.",
                                    "disabled": true
                                },
                                {
                                    "key": "deductible_type",
                                    "value": "",
                                    "description": "Filter by tax deductibility. Must be one of: deductible, non_deductible.",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "",
                                    "description": "Filter by document status. Must be one of: AUTORIZADO, ANULADO.",
                                    "disabled": true
                                },
                                {
                                    "key": "origin",
                                    "value": "",
                                    "description": "Filter by document origin\/source system. Must be one of: datil, physical-upload, tws, xml-import.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted?start_date=&end_date=&page=&per_page=&category_id%5B%5D=&regime=&deductible_type=&status=&origin=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves a paginated list of emitted documents (sales invoices) for a specific taxpayer.\nThis endpoint returns the same data as the UI emitted documents listing.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**Example URLs:**\n\nBasic query with date range:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?start_date=2024-01-01&end_date=2024-01-31&page=1&per_page=20\n```\n\nWith filters for general regime deductible invoices:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?regime=general&deductible_type=deductible&status=AUTORIZADO\n```\n\n**Important - HTTP Headers:**\n- **Required headers**: `x-api-key`, `x-organization-id`, `Accept: application\/json`\n- **Do NOT send**: `Content-Type: application\/json` (this is a GET request, parameters go in the URL)\n\n**Filter Format:** All filters use top-level query parameters.\n\n**Filtering Examples:**\n\nFilter by regime (general only):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?regime=general\n```\n\nFilter by deductibility (only deductible):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?deductible_type=deductible\n```\n\nFilter by specific categories (multiple IDs allowed):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?category_id[]=123&category_id[]=456\n```\n*Note: First retrieve available categories from GET \/api\/v1\/taxpayers\/{taxNumber}\/categories?type=sales*\n\nFilter by status (authorized documents only):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?status=AUTORIZADO\n```\n\nFilter by origin (only Datil-issued documents):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?origin=datil\n```\n\nMultiple filters combined (real use case):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted?start_date=2024-01-01&end_date=2024-01-31&regime=general&deductible_type=deductible&status=AUTORIZADO\n```"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents retrieved successfully\",\n  \"data\": {\n    \"invoices\": [\n      {\n        \"id\": 54321,\n        \"ulid\": \"01HZYYY789DEF012\",\n        \"invoice_number\": \"001-001-000005678\",\n        \"access_key\": \"0101202401172605128500110010010000056781234567813\",\n        \"invoiced_at\": \"2024-01-20T10:15:00.000000Z\",\n        \"authorization_date\": \"2024-01-20T10:16:30.000000Z\",\n        \"date_only\": \"2024-01-20\",\n        \"invoice_status\": \"AUTORIZADO\",\n        \"is_physical\": false,\n        \"is_sale_note\": false,\n        \"is_locked\": false,\n        \"lock_reason\": null,\n        \"locked_by_accountant\": false,\n        \"origin\": \"datil\",\n        \"document_type\": \"electronic\",\n        \"recipient\": {\n          \"tax_number\": \"9876543210001\",\n          \"business_name\": \"CLIENTE DEMO CIA. LTDA.\",\n          \"email\": \"cliente@example.com\",\n          \"phone\": \"0987654321\",\n          \"address\": \"Av. Cliente 456\",\n          \"forced_to_accounting\": true\n        },\n        \"payment\": {\n          \"payment_method\": \"20\",\n          \"payment_amount\": 224.00\n        },\n        \"totals\": {\n          \"subtotal_vat_zero\": 0.00,\n          \"subtotal_vat_five\": 0.00,\n          \"subtotal_vat_twelve\": 200.00,\n          \"subtotal_vat_thirteen\": 0.00,\n          \"subtotal_vat_fourteen\": 0.00,\n          \"subtotal_vat_fifteen\": 0.00,\n          \"subtotal_vat_special\": 0.00,\n          \"subtotal_vat_exempt\": 0.00,\n          \"subtotal_vat_not_subject\": 0.00,\n          \"sub_total\": 200.00,\n          \"discount\": 0.00,\n          \"tip\": 0.00,\n          \"subsidy\": 0.00,\n          \"total\": 224.00\n        },\n        \"taxes\": {\n          \"vat_five\": 0.00,\n          \"vat_twelve\": 24.00,\n          \"vat_thirteen\": 0.00,\n          \"vat_fourteen\": 0.00,\n          \"vat_fifteen\": 0.00,\n          \"vat_special\": 0.00,\n          \"ice\": 0.00,\n          \"irbpnr\": 0.00,\n          \"total_tax\": 24.00\n        },\n        \"tax_payer_category_id\": 78,\n        \"regime\": \"general\",\n        \"deductible_type\": \"deductible\",\n        \"categories\": [78],\n        \"regimes\": [\"general\"],\n        \"deductible_types\": [\"deductible\"],\n        \"categorized_by\": [\"manual\"],\n        \"is_multicategory\": false,\n        \"has_credit_notes\": false,\n        \"has_withholdings\": false,\n        \"url_pdf\": \"https:\/\/example.com\/invoice.pdf\",\n        \"xml_raw_url\": \"https:\/\/example.com\/invoice.xml\",\n        \"notes\": null,\n        \"voided_at\": null,\n        \"voided_origin\": null,\n        \"created_at\": \"2024-01-20T10:17:00.000000Z\",\n        \"updated_at\": \"2024-01-20T10:17:00.000000Z\"\n      }\n    ]\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"current_page\": 1,\n      \"per_page\": 20,\n      \"total\": 32,\n      \"total_pages\": 2,\n      \"from\": 1,\n      \"to\": 20\n    },\n    \"filters_applied\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-01-31\",\n      \"regime\": \"general\",\n      \"deductible_type\": \"deductible\",\n      \"status\": \"AUTORIZADO\"\n    }\n  }\n}",
                            "name": "Success - with invoices"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents retrieved successfully\",\n  \"data\": {\n    \"invoices\": []\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"current_page\": 1,\n      \"per_page\": 20,\n      \"total\": 0,\n      \"total_pages\": 0,\n      \"from\": 0,\n      \"to\": 0\n    },\n    \"filters_applied\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - no invoices found"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format\"],\n    \"per_page\": [\"The per page must not be greater than 100\"],\n    \"regime\": [\"Invalid regime. Must be one of: general, rimpe_entrepreneur, rimpe_popular_business\"]\n  }\n}",
                            "name": "Invalid filter"
                        }
                    ]
                },
                {
                    "name": "Get accumulated totals for emitted documents",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/accumulated",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_id%5B%5D",
                                    "value": "",
                                    "description": "Filter by category ID(s). Can pass multiple values using array notation. To obtain available category IDs for the taxpayer, use GET \/api\/v1\/taxpayers\/{taxNumber}\/categories?type=sales.",
                                    "disabled": true
                                },
                                {
                                    "key": "deductible_type",
                                    "value": "",
                                    "description": "Filter by tax deductibility. Must be one of: deductible, non_deductible.",
                                    "disabled": true
                                },
                                {
                                    "key": "regime",
                                    "value": "",
                                    "description": "Filter by tax regime. Must be one of: general, rimpe_entrepreneur, rimpe_popular_business.",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "",
                                    "description": "Filter by document status. Must be one of: AUTORIZADO, ANULADO.",
                                    "disabled": true
                                },
                                {
                                    "key": "origin",
                                    "value": "",
                                    "description": "Filter by document origin\/source system. Must be one of: datil, physical-upload, tws, xml-import.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/accumulated?start_date=&end_date=&category_id%5B%5D=&deductible_type=&regime=&status=&origin=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves aggregated totals and statistics for emitted documents (sales invoices) based on the applied filters.\nThis endpoint complements the emitted documents listing endpoint by providing calculated totals.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**What This Endpoint Returns:**\n\n- **Subtotals by VAT rate**: Detailed breakdown of subtotals for each VAT rate (15%, 14%, 13%, 12%, 5%, 0%, exempt, not subject)\n- **VAT amounts**: Total VAT charged at each rate\n- **Discounts**: Discounts applied at each VAT rate\n- **Header totals**: Simplified totals (subtotal, taxes, total)\n- **Document counts**: Total documents, categorized, uncategorized, voided\n- **Applied filters**: Summary of which filters were used\n\n**\u26a0\ufe0f Understanding `total_sum` vs `total_header`:**\n\nThe response includes TWO total values that may differ slightly:\n\n- **`total_sum`**: Direct sum of the `total` field from each document.\n  - This is the **OFFICIAL** total authorized by SRI for each document.\n  - **Use this for**: Official reports, tax declarations, accounting records.\n  - Example: If 3 invoices have totals of 100.00, 200.00, and 300.00, then `total_sum` = 600.00\n\n- **`total_header`**: Calculated by summing adjusted subtotals + recalculated VAT per document.\n  - VAT is recalculated as: `round((subtotal - discount) * vat_rate, 2)` for each document.\n  - May differ from `total_sum` by a few cents due to rounding differences.\n  - **Use this for**: Internal consistency checks, discount distribution analysis.\n\n**Why the difference?**\nWhen documents are issued, the SRI-authorized VAT may differ slightly from a strict mathematical recalculation\ndue to rounding rules applied by different systems (Datil, manual entry, XML imports, etc.). The `total_sum`\nrespects the original authorized values, while `total_header` applies uniform recalculation logic.\n\n**Recommendation:** For official purposes, always use `total_sum` as it represents the actual authorized totals.\n\n**Use Cases:**\n\n- Display statistics cards in dashboard (like UI)\n- Generate financial reports\n- Validate VAT calculations for sales\n- Monitor categorization progress\n- Calculate revenue and tax collection\n\n**Example URLs:**\n\nGet totals for current month:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/accumulated\n```\n\nGet totals for specific date range:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/accumulated?start_date=2024-01-01&end_date=2024-01-31\n```\n\nGet totals for general regime and authorized status:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/accumulated?regime=general&status=AUTORIZADO\n```\n\n**Filters:**\n\nThis endpoint accepts the **same filters** as the emitted invoices listing endpoint:\n- `start_date`, `end_date`: Date range (defaults to current month)\n- `category_id[]`: Specific category IDs (array)\n- `deductible_type`: Tax deductibility (deductible, non_deductible)\n- `regime`: Tax regime (general, rimpe_entrepreneur, rimpe_popular_business)\n- `status`: Document status (AUTORIZADO, ANULADO)\n- `origin`: Document origin (datil, physical-upload, tws, xml-import)\n\n**Note:** Pagination parameters (page, per_page) and sort are ignored as this endpoint returns a single aggregated result."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents accumulated totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_vat_fifteen_sum\": 200.00,\n      \"discount_vat_fifteen_sum\": 0,\n      \"vat_fifteen_sum\": 30.00,\n      \"subtotal_vat_fourteen_sum\": 0,\n      \"discount_vat_fourteen_sum\": 0,\n      \"vat_fourteen_sum\": 0,\n      \"subtotal_vat_thirteen_sum\": 0,\n      \"discount_vat_thirteen_sum\": 0,\n      \"vat_thirteen_sum\": 0,\n      \"subtotal_vat_twelve_sum\": 150.00,\n      \"discount_vat_twelve_sum\": 0,\n      \"vat_twelve_sum\": 18.00,\n      \"subtotal_vat_five_sum\": 0,\n      \"discount_vat_five_sum\": 0,\n      \"vat_five_sum\": 0,\n      \"subtotal_vat_special_sum\": 0,\n      \"discount_vat_special_sum\": 0,\n      \"vat_special_sum\": 0,\n      \"subtotal_vat_zero_sum\": 100.00,\n      \"discount_vat_zero_sum\": 0,\n      \"subtotal_vat_exempt_sum\": 0,\n      \"discount_vat_exempt_sum\": 0,\n      \"subtotal_vat_not_subject_sum\": 0,\n      \"discount_vat_not_subject_sum\": 0,\n      \"sub_total_sum\": 450.00,\n      \"tip_sum\": 0,\n      \"subsidy_sum\": 0,\n      \"discount_sum\": 0,\n      \"total_sum\": 498.00,\n      \"subtotal_header\": 450.00,\n      \"taxes_header\": 48.00,\n      \"subtotal_taxes_header\": 498.00,\n      \"total_header\": 498.00,\n      \"document_count\": 15,\n      \"categorized_document_count\": 12,\n      \"uncategorized_document_count\": 3,\n      \"voided_document_count\": 2\n    },\n    \"totals_explanation\": {\n      \"total_sum\": \"Direct sum of 'total' field from documents (SRI-authorized values). Use for official reports.\",\n      \"total_header\": \"Calculated from subtotals + recalculated VAT. May differ slightly from total_sum due to rounding.\"\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - Current month totals"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents accumulated totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_vat_fifteen_sum\": 25624.64,\n      \"vat_fifteen_sum\": 3844.31,\n      \"subtotal_vat_zero_sum\": 0,\n      \"sub_total_sum\": 25624.64,\n      \"total_sum\": 29468.92,\n      \"subtotal_header\": 25624.64,\n      \"taxes_header\": 3844.31,\n      \"total_header\": 29468.95,\n      \"document_count\": 1005,\n      \"categorized_document_count\": 1005,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 0\n    },\n    \"totals_explanation\": {\n      \"total_sum\": \"Direct sum of 'total' field from documents (SRI-authorized values). Use for official reports.\",\n      \"total_header\": \"Calculated from subtotals + recalculated VAT. May differ slightly from total_sum due to rounding.\",\n      \"difference\": \"In this example, total_header (29468.95) differs from total_sum (29468.92) by 0.03 due to VAT rounding in individual documents.\"\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"start_date\": \"2025-10-01\",\n      \"end_date\": \"2025-10-31\",\n      \"regime\": \"general\",\n      \"status\": \"AUTORIZADO\"\n    }\n  }\n}",
                            "name": "Success - Showing rounding difference"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Not Found - Taxpayer does not exist"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format.\"],\n    \"regime\": [\"Invalid regime. Must be one of: general, rimpe_entrepreneur, rimpe_popular_business.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving accumulated totals\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get accumulated emitted retention totals",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/retentions\/accumulated",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering retentions (YYYY-MM-DD format). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering retentions (YYYY-MM-DD format). Defaults to last day of current month.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/retentions\/accumulated?start_date=&end_date=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves aggregated totals of emitted withholding retentions for a specific taxpayer and team\nwithin a date range. Returns amounts withheld for VAT, Income Tax (Rent), and Special Taxes (IGT\/ISD),\nalong with their tax bases and document counts.\n\n**What are emitted retentions?**\nEmitted retentions are withholding documents issued by the taxpayer to their suppliers\/sellers.\nWhen a taxpayer makes a purchase, they may be required to withhold a portion of taxes\nand issue a retention document to the supplier.\n\n**Use Cases:**\n- Display retention statistics on dashboards\n- Generate monthly retention reports for compliance\n- Monitor total amounts withheld by tax type\n- Track active vs voided retentions\n- Calculate tax obligations and credits\n\n**Performance:**\nThis endpoint uses direct database aggregation for efficient calculation of totals\neven with large datasets containing thousands of retention documents.\n\n**Default Period:** If no dates are specified, the current month is used.\n\n**Important Notes:**\n- Only active (non-voided) retentions are included in the monetary totals\n- Voided retentions are counted separately but not included in amounts\n- All amounts are in USD\n- Tax bases represent the amounts on which withholdings were calculated"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted retention totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"vat_withheld\": 450.75,\n      \"rent_withheld\": 1250.00,\n      \"igt_withheld\": 0.00,\n      \"total_withheld\": 1700.75,\n      \"tax_bases\": {\n        \"vat\": 15025.00,\n        \"rent\": 12500.00,\n        \"igt\": 0.00,\n        \"total\": 27525.00\n      }\n    },\n    \"counts\": {\n      \"total_retentions\": 45,\n      \"active_retentions\": 43,\n      \"voided_retentions\": 2\n    },\n    \"period\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - Current Month"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted retention totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"vat_withheld\": 2350.50,\n      \"rent_withheld\": 4200.00,\n      \"igt_withheld\": 125.00,\n      \"total_withheld\": 6675.50,\n      \"tax_bases\": {\n        \"vat\": 78350.00,\n        \"rent\": 42000.00,\n        \"igt\": 1250.00,\n        \"total\": 121600.00\n      }\n    },\n    \"counts\": {\n      \"total_retentions\": 156,\n      \"active_retentions\": 150,\n      \"voided_retentions\": 6\n    },\n    \"period\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-03-31\"\n    }\n  }\n}",
                            "name": "Success - Custom Period"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted retention totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"vat_withheld\": 0.00,\n      \"rent_withheld\": 0.00,\n      \"igt_withheld\": 0.00,\n      \"total_withheld\": 0.00,\n      \"tax_bases\": {\n        \"vat\": 0.00,\n        \"rent\": 0.00,\n        \"igt\": 0.00,\n        \"total\": 0.00\n      }\n    },\n    \"counts\": {\n      \"total_retentions\": 0,\n      \"active_retentions\": 0,\n      \"voided_retentions\": 0\n    },\n    \"period\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - No Retentions"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Taxpayer Not Found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start_date must be in the format YYYY-MM-DD.\"],\n    \"end_date\": [\"The end_date must be equal to or after start_date.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving emitted retention totals\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get count of all emitted documents types",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/count",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for counting (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for counting (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/count?start_date=&end_date=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves document counts across all emitted document types (sales invoices, credit notes, withholdings, settlements)\nfor a specific taxpayer and time period.\n\nThis endpoint aggregates data from four tables:\n- **invoices**: Sales invoices (Facturas de Venta)\n- **sale_credit_notes**: Credit notes applied to sales (Notas de Cr\u00e9dito de Venta)\n- **sale_withholdings**: Withholdings issued to sellers (Retenciones Emitidas)\n- **sale_settlements**: Purchase settlements (Liquidaciones de Compra)\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**Default Behavior:**\n- If no date range is specified, returns counts for the current month\n- Only counts documents that belong to the authenticated taxpayer and team (organization)\n- Excludes deleted documents (soft deletes)\n\n**Use Cases:**\n- Dashboard statistics showing total documents emitted\n- Monthly\/period document volume analysis\n- Document type distribution reports\n- Compliance verification (ensuring all document types are being processed)\n- Sales performance tracking\n- Invoice generation monitoring\n\n**Example URLs:**\n\nGet counts for current month:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/count\n```\n\nGet counts for specific period:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/count?start_date=2024-01-01&end_date=2024-01-31\n```\n\nGet counts for entire year:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/count?start_date=2024-01-01&end_date=2024-12-31\n```"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents count retrieved successfully\",\n  \"data\": {\n    \"counts\": {\n      \"invoices\": 120,\n      \"credit_notes\": 5,\n      \"withholdings\": 18,\n      \"settlements\": 2,\n      \"total\": 145\n    },\n    \"period\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - Current month"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents count retrieved successfully\",\n  \"data\": {\n    \"counts\": {\n      \"invoices\": 450,\n      \"credit_notes\": 15,\n      \"withholdings\": 65,\n      \"settlements\": 8,\n      \"total\": 538\n    },\n    \"period\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-03-31\"\n    }\n  }\n}",
                            "name": "Success - Custom period"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Emitted documents count retrieved successfully\",\n  \"data\": {\n    \"counts\": {\n      \"invoices\": 0,\n      \"credit_notes\": 0,\n      \"withholdings\": 0,\n      \"settlements\": 0,\n      \"total\": 0\n    },\n    \"period\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - No documents"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Not Found - Taxpayer does not exist"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format.\"],\n    \"end_date\": [\"The end date must be equal to or after the start date.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving document counts\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get accumulated totals for a specific client (Customer)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/clients\/:contactTaxNumber\/totals",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_id%5B%5D",
                                    "value": "",
                                    "description": "Filter by category ID(s). Can pass multiple values. To obtain available category IDs, use GET \/api\/v1\/taxpayers\/{taxNumber}\/categories?type=sales.",
                                    "disabled": true
                                },
                                {
                                    "key": "deductible_type",
                                    "value": "",
                                    "description": "Filter by tax deductibility. Must be one of: deductible, non_deductible.",
                                    "disabled": true
                                },
                                {
                                    "key": "regime",
                                    "value": "",
                                    "description": "Filter by tax regime. Must be one of: general, rimpe_entrepreneur, rimpe_popular_business.",
                                    "disabled": true
                                },
                                {
                                    "key": "origin",
                                    "value": "",
                                    "description": "Filter by document origin\/source system. Must be one of: datil, physical-upload, tws, xml-import.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/clients\/:contactTaxNumber\/totals?start_date=&end_date=&category_id%5B%5D=&deductible_type=&regime=&origin=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "contactTaxNumber",
                                    "key": "contactTaxNumber",
                                    "value": "0998765432001",
                                    "description": "The client's tax number (RUC\/CI)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves aggregated totals and statistics for emitted documents to a specific client (customer).\nThis endpoint filters all invoices by the client's tax number and applies additional filters.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**What This Endpoint Returns:**\n\n- **Subtotals by VAT rate**: Detailed breakdown of subtotals for each VAT rate (15%, 14%, 13%, 12%, 5%, 0%, exempt, not subject)\n- **VAT amounts**: Total VAT charged at each rate\n- **Discounts**: Discounts applied at each VAT rate\n- **Header totals**: Simplified totals (subtotal, taxes, total)\n- **Document counts**: Total documents, categorized, uncategorized, voided\n- **Applied filters**: Summary of which filters were used (including client filter)\n\n**\u26a0\ufe0f Understanding `total_sum` vs `total_header`:**\n\nThe response includes TWO total values that may differ slightly:\n\n- **`total_sum`**: Direct sum of the `total` field from each document (SRI-authorized values). **Use for official reports.**\n- **`total_header`**: Calculated from subtotals + recalculated VAT. May differ by a few cents due to rounding.\n\nSee the `\/emitted\/accumulated` endpoint documentation for detailed explanation of this difference.\n\n**Use Cases:**\n\n- Analyze sales to a specific client\n- Client performance and revenue reports\n- Validate client invoices and totals\n- Calculate client-specific discounts and benefits\n- Client comparison and ranking reports\n- Credit analysis and payment behavior\n\n**Example URLs:**\n\nGet totals for specific client (current month):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/clients\/0998765432001\/totals\n```\n\nGet totals for specific client and date range:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/clients\/0998765432001\/totals?start_date=2024-01-01&end_date=2024-12-31\n```\n\nGet general regime sales totals to specific client:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/emitted\/clients\/0998765432001\/totals?regime=general\n```\n\n**Filters:**\n\nThis endpoint accepts the **same filters** as `\/emitted\/accumulated`:\n- `start_date`, `end_date`: Date range (defaults to current month)\n- `category_id[]`: Specific category IDs (array)\n- `deductible_type`: Tax deductibility (deductible, non_deductible)\n- `regime`: Tax regime (general, rimpe_entrepreneur, rimpe_popular_business)\n- `origin`: Document origin (datil, physical-upload, tws, xml-import)\n\n**Note:** Status filter is not available for this endpoint. All calculations are performed on AUTHORIZED documents only.\n\n**Plus:** Automatically filters by `contact_tax_number` (client's RUC\/CI) from URL parameter"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Client totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_vat_fifteen_sum\": 5420.80,\n      \"vat_fifteen_sum\": 813.12,\n      \"subtotal_vat_twelve_sum\": 1200.00,\n      \"vat_twelve_sum\": 144.00,\n      \"subtotal_vat_zero_sum\": 500.00,\n      \"sub_total_sum\": 7120.80,\n      \"total_sum\": 8077.92,\n      \"subtotal_header\": 7120.80,\n      \"taxes_header\": 957.12,\n      \"total_header\": 8077.92,\n      \"document_count\": 25,\n      \"categorized_document_count\": 25,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 1\n    },\n    \"totals_explanation\": {\n      \"total_sum\": \"Direct sum of 'total' field from documents (SRI-authorized values). Use for official reports.\",\n      \"total_header\": \"Calculated from subtotals + recalculated VAT. May differ slightly from total_sum due to rounding.\"\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-12-31\",\n      \"client\": {\n        \"contact_tax_number\": \"0998765432001\"\n      }\n    }\n  }\n}",
                            "name": "Success - Client totals"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Client totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_header\": 0.00,\n      \"taxes_header\": 0.00,\n      \"total_header\": 0.00,\n      \"total_sum\": 0.00,\n      \"document_count\": 0,\n      \"categorized_document_count\": 0,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 0\n    },\n    \"totals_explanation\": {\n      \"total_sum\": \"Direct sum of 'total' field from documents (SRI-authorized values). Use for official reports.\",\n      \"total_header\": \"Calculated from subtotals + recalculated VAT. May differ slightly from total_sum due to rounding.\"\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\",\n      \"client\": {\n        \"contact_tax_number\": \"0998765432001\"\n      }\n    }\n  }\n}",
                            "name": "Success - No documents for client"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Not Found - Taxpayer does not exist"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format.\"],\n    \"regime\": [\"Invalid regime. Must be one of: general, rimpe_entrepreneur, rimpe_popular_business.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving client totals\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Step 1: Start Excel Export (Asynchronous)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/export\/excel",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/export\/excel",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "Tax identification number (RUC\/C\u00e9dula)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"document_type\":\"invoice\",\"start_date\":\"2025-01-01\",\"end_date\":\"2025-01-31\",\"origin\":\"tws\",\"contact_tax_number\":\"1790000000001\"}"
                        },
                        "description": "**IMPORTANT: This is an asynchronous endpoint.** It starts a background export process and returns immediately.\nYou must use the returned `export_id` to poll the status endpoint until the file is ready.\n\n### Complete Workflow (3 Steps):\n\n**STEP 1: Start the export (this endpoint)**\n```bash\nPOST \/api\/v1\/taxpayers\/{taxNumber}\/emitted\/export\/excel\n```\nYou will receive a response like:\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",  \u2190 SAVE THIS ID!\n    \"status\": \"pending\",\n    \"polling_url\": \"\/api\/v1\/taxpayers\/1726051285001\/emitted\/export\/status\/exp_67abc123_1734567890\"\n  }\n}\n```\n\n**STEP 2: Poll the status (repeatedly)**\nUse the `export_id` from Step 1 to check progress:\n```bash\nGET \/api\/v1\/taxpayers\/{taxNumber}\/emitted\/export\/status\/{export_id}\n```\nPoll every 10-30 seconds until `status` is `completed` or `failed`.\n\n**STEP 3: Download the file**\nWhen status is `completed`, the response will include a `download_url`:\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"completed\",\n    \"progress\": 100,\n    \"download_url\": \"https:\/\/s3.amazonaws.com\/...\"  \u2190 USE THIS TO DOWNLOAD\n  }\n}\n```\nThe `download_url` is a temporary signed URL that expires in 1 hour.\n\n### Key Points:\n- \u2705 This endpoint returns immediately (HTTP 202) - the export runs in background\n- \u2705 Extract `data.export_id` from the response - you'll need it for polling\n- \u2705 Use the provided `polling_url` or construct it manually with the `export_id`\n- \u2705 Poll at any frequency (suggested: every 10 seconds for small exports, 30-60 seconds for large ones)\n- \u2705 The download URL requires no additional authentication (it's signed)\n- \u2705 If dates are not provided, defaults to current month\n\n### Export Types:\n- **invoice**: Export sales invoices (facturas de venta)\n- **credit_note**: Export sales credit notes (notas de cr\u00e9dito de venta)\n- **retention**: Export emitted withholdings (retenciones emitidas)\n- **settlement**: Export purchase settlements (liquidaciones de compra)"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 202,
                            "body": "{\n  \"success\": true,\n  \"message\": \"Export started. Use the export_id to check progress.\",\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"pending\",\n    \"document_type\": \"invoice\",\n    \"estimated_records\": 1234,\n    \"batch_size\": 1000,\n    \"estimated_time_seconds\": 60,\n    \"polling_url\": \"\/api\/v1\/taxpayers\/1726051285001\/emitted\/export\/status\/exp_67abc123_1734567890\",\n    \"suggested_polling_interval_seconds\": 10\n  }\n}",
                            "name": "Export started successfully - SAVE THE export_id!"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"success\": false,\n  \"message\": \"El tipo de documento es requerido.\",\n  \"errors\": {\n    \"document_type\": [\"El tipo de documento es requerido.\"]\n  }\n}",
                            "name": "Invalid data"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Taxpayer not found or does not belong to your team.\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Error al iniciar la exportaci\u00f3n de documentos emitidos.\"\n}",
                            "name": "Server error"
                        }
                    ]
                },
                {
                    "name": "Step 2: Check Excel Export Status (Polling)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/export\/status\/:exportId",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/export\/status\/:exportId",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "Tax identification number (RUC\/C\u00e9dula)."
                                },
                                {
                                    "id": "exportId",
                                    "key": "exportId",
                                    "value": "exp_67abc123_1734567890",
                                    "description": "Export ID obtained from the start export endpoint (data.export_id)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            }
                        ],
                        "body": null,
                        "description": "**Use this endpoint to check if your emitted documents export is ready.** Poll this endpoint repeatedly\nusing the `export_id` you received from the start export endpoint until the status is `completed`.\n\n### How to Use This Endpoint:\n\n**1. Get the export_id**\nAfter calling `POST \/api\/v1\/taxpayers\/{taxNumber}\/emitted\/export\/excel`, you'll receive:\n```json\n{\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",  \u2190 USE THIS ID HERE\n    \"polling_url\": \"\/api\/v1\/taxpayers\/1726051285001\/emitted\/export\/status\/exp_67abc123_1734567890\"\n  }\n}\n```\n\n**2. Poll this endpoint**\n```bash\nGET \/api\/v1\/taxpayers\/{taxNumber}\/emitted\/export\/status\/exp_67abc123_1734567890\n                                                         \u2514\u2500 YOUR export_id goes here\n```\n\n**3. Check the status field**\n- `pending` \u2192 Keep polling (export is queued)\n- `processing` \u2192 Keep polling (export is being generated)\n- `completed` \u2192 **STOP POLLING** and extract `download_url` from response\n- `failed` \u2192 Stop polling (check `error_message`)\n\n**4. When completed, download the file**\n```json\n{\n  \"data\": {\n    \"status\": \"completed\",\n    \"download_url\": \"https:\/\/s3.amazonaws.com\/...\"  \u2190 DOWNLOAD FROM HERE\n  }\n}\n```\nSimply make a GET request to the `download_url` - no authentication needed (it's signed).\n\n### Polling Strategy:\n- **Small exports (< 1000 records)**: Poll every 10 seconds\n- **Medium exports (1000-10000 records)**: Poll every 20-30 seconds\n- **Large exports (> 10000 records)**: Poll every 30-60 seconds\n- You can poll at any frequency you want - the suggestion is just to avoid unnecessary requests\n- The export will be processed regardless of polling frequency\n\n### About the Download URL:\n- \u2705 It's a temporary AWS S3 signed URL\n- \u2705 Valid for 1 hour after export completion\n- \u2705 No additional authentication required (signature is in the URL)\n- \u2705 Direct download - just make a GET request to it\n- \u26a0\ufe0f Download the file within 1 hour or it will expire\n\n### Progress Tracking:\nWhile the export is `processing`, you'll receive:\n- `progress`: Percentage completed (0-100)\n- `processed_records` \/ `total_records`: Exact counts\n- `estimated_time_remaining_seconds`: Rough estimate"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"pending\",\n    \"progress\": 0,\n    \"message\": \"Export is queued and waiting to be processed.\"\n  }\n}",
                            "name": "Status: pending (keep polling)"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"processing\",\n    \"progress\": 45,\n    \"processed_records\": 450,\n    \"total_records\": 1000,\n    \"estimated_time_remaining_seconds\": 30,\n    \"message\": \"Export is being generated. Please wait...\"\n  }\n}",
                            "name": "Status: processing (keep polling)"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"completed\",\n    \"progress\": 100,\n    \"processed_records\": 1000,\n    \"total_records\": 1000,\n    \"download_url\": \"https:\/\/s3.amazonaws.com\/taxo-exports\/exports\/exp_67abc123_1734567890.xlsx?signature=...\",\n    \"expires_at\": \"2025-01-23T15:30:00Z\",\n    \"file_size_bytes\": 245678,\n    \"message\": \"Export completed successfully. Download the file using the provided URL.\"\n  }\n}",
                            "name": "Status: completed (download now!)"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": false,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"failed\",\n    \"progress\": 0,\n    \"error_message\": \"No records found matching the specified criteria.\",\n    \"failed_at\": \"2025-01-22T14:30:00Z\"\n  }\n}",
                            "name": "Status: failed"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"message\": \"Unauthenticated.\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Exportaci\u00f3n no encontrada o no pertenece a tu organizaci\u00f3n.\"\n}",
                            "name": "Export not found"
                        }
                    ]
                },
                {
                    "name": "Import Physical Sales Document",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/physical-documents",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/physical-documents",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "Tax identification number (RUC\/C\u00e9dula)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "multipart\/form-data"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "category_id",
                                    "value": "123",
                                    "type": "text",
                                    "description": "optional Category ID for this document. You can get available categories from other endpoints."
                                },
                                {
                                    "key": "total_value",
                                    "value": "150.50",
                                    "type": "text",
                                    "description": "optional Total value of the document. Can be 0 if you want accountant to fill it later. Default: 0."
                                },
                                {
                                    "key": "vat_type",
                                    "value": "12",
                                    "type": "text",
                                    "description": "optional Type of VAT applied. Default: \"0\"."
                                },
                                {
                                    "key": "document_date",
                                    "value": "2026-01-22",
                                    "type": "text",
                                    "description": "optional Date of the document in YYYY-MM-DD format. Cannot be in the future. Default: today."
                                },
                                {
                                    "key": "notes",
                                    "value": "Venta al contado",
                                    "type": "text",
                                    "description": "optional Additional notes about the document (max 1000 characters)."
                                },
                                {
                                    "key": "contact_tax_number",
                                    "value": "1234567890001",
                                    "type": "text",
                                    "description": "optional Tax number (RUC\/CI) of the client (max 20 characters)."
                                },
                                {
                                    "key": "files[]",
                                    "src": [],
                                    "type": "file"
                                }
                            ]
                        },
                        "description": "Upload one or more files (images or PDFs) representing a physical sales document.\nThis is useful when you have scanned receipts, manual invoices, or other sales documents\nthat need to be stored in the system for later review by an accountant.\n\n### Use Case:\nThis endpoint allows you to quickly upload physical document files without manually\nentering all the details. An accountant can later review the uploaded images through\nthe web interface and complete the information (update totals, VAT type, category, etc.).\n\n### File Requirements:\n- **Types allowed**: PDF, JPG, JPEG, PNG\n- **Max size per file**: 10 MB\n- **Min files**: 1\n- **Max files**: 5\n\n### VAT Types (vat_type):\n- `\"0\"` - VAT 0% (default if not specified)\n- `\"5\"` - VAT 5%\n- `\"12\"` - VAT 12% (historical)\n- `\"13\"` - VAT 13% (historical)\n- `\"14\"` - VAT 14% (historical)\n- `\"15\"` - VAT 15%\n- `\"exempt\"` - Exempt from VAT\n- `\"not_subject\"` - Not subject to VAT\n- `\"special\"` - Special regime\n\n### Important Notes:\n- All fields except `files[]` are optional\n- `total_value` can be `0` - useful when you want to upload images first and let accountant fill amounts later\n- `category_id` can be omitted - accountant can categorize later via web interface\n- `document_date` defaults to today if not provided\n- The returned `ulid` can be used with detail endpoints like `GET \/api\/v1\/taxpayers\/{taxNumber}\/emitted\/{documentUlid}\/details`"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 201,
                            "body": "{\n  \"success\": true,\n  \"message\": \"Physical document created successfully with 2 file(s) attached.\",\n  \"data\": {\n    \"ulid\": \"01HN9K8Z6Q2YWXJ3E5M4VFGTH7\",\n    \"document_type\": \"emitted\",\n    \"total_value\": 250.00,\n    \"vat_type\": \"15\",\n    \"document_date\": \"2026-01-22\",\n    \"files_count\": 2,\n    \"created_at\": \"2026-01-22T10:30:00Z\"\n  }\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Taxpayer not found.\"\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Validation failed.\",\n  \"errors\": {\n    \"files.0\": [\"The file must not be greater than 10240 kilobytes.\"],\n    \"files\": [\"You may not upload more than 5 files.\"],\n    \"vat_type\": [\"Invalid VAT type. Allowed: 0, 5, 12, 13, 14, 15, exempt, not_subject, special.\"]\n  }\n}",
                            "name": ""
                        }
                    ]
                },
                {
                    "name": "Get details of a specific emitted document",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/:documentUlid\/details",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/:documentUlid\/details",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "documentUlid",
                                    "key": "documentUlid",
                                    "value": "01HQXZ8P9G2K4MNBVCXWERTYU1",
                                    "description": "The unique ULID identifier of the document."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves full details of a specific emitted document (sales invoice, credit note, withholding, or settlement)\nby its unique ULID identifier. This endpoint returns comprehensive data including all related information\nsuch as items, customer data, payment information, taxes, totals, and associated files.\n\n**This endpoint provides:**\n- Complete document header information (number, dates, status, access key)\n- All document line items with detailed categorization and tax information\n- Complete customer\/buyer data (name, tax number, email, phone, address)\n- Payment information (methods, amounts, terms)\n- Detailed tax breakdowns by type (IVA 0%, 12%, 15%, etc.)\n- Document totals and calculations\n- Associated files (PDF, XML) with signed URLs\n- For invoices: related credit notes\n- Document status and locking information\n- Categorization data, deductibility types, and regime\n- Metadata with taxpayer and team context\n\n**How to obtain the document ULID:**\n\nThe ULID can be obtained from:\n- `GET \/api\/v1\/taxpayers\/{taxNumber}\/emitted` - Field `id` or `ulid` in each document\n- `GET \/api\/v1\/taxpayers\/{taxNumber}\/emitted\/{documentUlid}\/status` - Returns ULID and type\n- Any other endpoint that lists emitted documents\n\n**Document Types:**\n- `invoice` - Sales invoice (includes items, payments, taxes, totals, credit notes)\n- `credit_note` - Credit note for sales (includes items, linked to supporting invoice)\n- `withholding` - Withholding issued to seller (includes withholding items and tax calculations)\n- `settlement` - Purchase settlement \/ Liquidaci\u00f3n de compra (includes items and payments)\n\n**Performance:**\n- Uses early exit strategy: stops searching as soon as document is found\n- Leverages database indexes (ulid, tax_payer_id, team_id) for optimal performance\n- Lazy loads relationships only when document is found\n\n**Note:** This endpoint uses optimized API Resources that return only essential data,\nunlike UI endpoints which include full taxpayer and team objects."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"invoice\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU1\",\"type\":\"invoice\",\"document_number\":\"001-001-000000123\",\"status\":\"AUTORIZADO\",\"access_key\":\"1234567890123456789012345678901234567890123456789\",\"issue_date\":\"2024-01-15\",\"authorization_date\":\"2024-01-15 14:30:00\",\"categories\":[\"Ingresos Operacionales\"],\"category_types\":[\"income\"],\"deductible_types\":[\"deductible\"],\"customer\":{\"name\":\"CLIENTE DEMO S.A.\",\"email\":\"cliente@example.com\",\"tax_number\":\"1790000000001\",\"phone\":\"0999999999\",\"address\":\"Av. Principal 123\"},\"issuer\":{\"id\":\"1726051285001\",\"id_type\":\"ruc\"},\"payments\":[{\"method\":\"01\",\"amount\":112.00,\"term\":\"0\"}],\"items\":[{\"id\":1,\"description\":\"Producto vendido\",\"sku\":\"PROD001\",\"quantity\":1,\"price\":100.00,\"discount\":0,\"sub_total\":100.00,\"tax\":12.00,\"tax_type\":\"IVA 12%\",\"total\":112.00,\"category\":{\"id\":5,\"name\":\"Ventas\"},\"deductible_type\":\"deductible\",\"regime\":\"general\",\"category_message\":null,\"categorized_by\":\"user\"}],\"taxes\":{\"subtotal_vat_twelve\":100.00,\"vat_twelve\":12.00},\"totals\":{\"subtotal\":100.00,\"total\":112.00},\"files\":{\"pdf\":\"https:\/\/s3.amazonaws.com\/...\/document.pdf\",\"xml\":\"https:\/\/s3.amazonaws.com\/...\/document.xml\"},\"credit_notes\":[],\"notes\":\"Observaciones\",\"origin\":\"tws\",\"is_physical\":false,\"is_sale_note\":false,\"is_checked\":true,\"regime\":\"general\",\"deductible_type\":\"deductible\",\"is_locked\":false,\"created_at\":\"2024-01-15T14:30:00+00:00\"},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Sales Invoice"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"credit_note\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU5\",\"type\":\"credit_note\",\"document_number\":\"001-001-000000124\",\"status\":\"AUTORIZADO\",\"issue_date\":\"2024-01-15\",\"supporting_document\":{\"invoice_id\":\"01HQXZ8P9G2K4MNBVCXWERTYU1\",\"invoice_number\":\"001-001-000000123\",\"emission_date\":\"2024-01-15\"},\"cause\":\"Devoluci\u00f3n de mercader\u00eda\",\"customer\":{\"name\":\"CLIENTE DEMO S.A.\",\"tax_number\":\"1790000000001\"},\"items\":[{\"id\":1,\"description\":\"Producto devuelto\",\"quantity\":1,\"price\":50.00,\"tax\":6.00,\"total\":56.00,\"category\":{\"id\":5,\"name\":\"Devoluciones\"}}],\"totals\":{\"subtotal\":50.00,\"total\":56.00}},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Credit Note"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"withholding\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU6\",\"type\":\"withholding\",\"document_number\":\"001-001-000000125\",\"status\":\"AUTORIZADO\",\"fiscal_period\":\"01\/2024\",\"supporting_documents\":{\"numbers\":\"001-001-000000123\",\"dates\":\"15\/01\/2024\"},\"subject\":{\"name\":\"PROVEEDOR DEMO S.A.\",\"tax_number\":\"1790000000001\"},\"items\":[{\"id\":1,\"invoice_number\":\"001-001-000000123\",\"tax_type\":\"IVA\",\"tax_base\":100.00,\"percentage\":30,\"amount\":30.00}],\"taxes\":{\"vat\":{\"tax_base\":100.00,\"amount\":30.00,\"percentage\":30},\"rent\":{\"tax_base\":0,\"amount\":0,\"percentage\":0},\"igt\":{\"tax_base\":0,\"amount\":0,\"percentage\":0}},\"files\":{\"pdf\":\"https:\/\/s3.amazonaws.com\/...\/retention.pdf\",\"xml\":\"https:\/\/s3.amazonaws.com\/...\/retention.xml\"}},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Withholding"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"settlement\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU7\",\"type\":\"settlement\",\"document_number\":\"001-001-000000126\",\"status\":\"AUTORIZADO\",\"issue_date\":\"2024-01-15\",\"provider\":{\"name\":\"PROVEEDOR DEMO S.A.\",\"tax_number\":\"1790000000001\"},\"items\":[{\"id\":1,\"description\":\"Servicio\",\"quantity\":1,\"price\":100.00,\"tax\":12.00,\"total\":112.00}],\"totals\":{\"subtotal\":100.00,\"total\":112.00}},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Settlement"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Document not found or does not belong to this taxpayer\"\n}",
                            "name": "Document Not Found"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Taxpayer Not Found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving document details\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get status of a specific emitted document",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/emitted\/:documentUlid\/status",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/emitted\/:documentUlid\/status",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "documentUlid",
                                    "key": "documentUlid",
                                    "value": "01HQXZ8P9G2K4MNBVCXWERTYU1",
                                    "description": "The unique ULID identifier of the document. Can be from invoices, credit notes, withholdings, or settlements."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves the current status of a specific emitted document (invoice, credit note, withholding, or settlement)\nby its unique ULID identifier. The system will automatically search across all emitted document types\nand return the status along with the document type.\n\n**Performance:** The search uses database indexes and stops as soon as the document is found,\nensuring optimal query performance even with large datasets.\n\n**How to obtain the document ULID:**\n\nYou can get the document ULID from these endpoints:\n- `GET \/api\/v1\/taxpayers\/{taxNumber}\/emitted` - Returns sales invoices with their ULIDs\n- Any other endpoint that lists emitted documents\n\nThe ULID field is typically returned as `ulid` in the document listing responses.\n\n**Document Types:**\n- `invoice` - Sales invoice (from invoices table)\n- `credit_note` - Sales credit note (from sale_credit_notes table)\n- `withholding` - Withholding issued (from sale_withholdings table)\n- `settlement` - Purchase settlement (from sale_settlements table \/ liquidaci\u00f3n de compra)\n\n**Status Values:**\n\nFor invoices, credit notes, withholdings and settlements:\n- `AUTORIZADO` - Authorized document\n- `NO AUTORIZADO` - Not authorized document\n- `ANULADO` - Voided\/Cancelled document\n- Other status values depending on the electronic document system"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"invoice\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Invoice"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"credit_note\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Credit Note"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"withholding\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Withholding"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"settlement\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Settlement"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Document not found or does not belong to this taxpayer\"\n}",
                            "name": "Document Not Found"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Taxpayer Not Found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving document status\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                }
            ]
        },
        {
            "name": "IVA Reports",
            "description": "\nAPI endpoints for managing IVA (Value Added Tax) reports.\n\n## Report Lifecycle & State Machine\n\nEach IVA report follows a state machine with controlled transitions. Understanding the states and allowed transitions is critical for proper API usage.\n\n### Report States\n\n| State | Code | Description | Can Edit? |\n|-------|------|-------------|-----------|\n| Draft | `draft` | Initial state, automatically created | \u2705 Yes |\n| Edited | `edited` | Has manual modifications | \u2705 Yes |\n| Saved | `saved` | Ready for review\/approval | \u274c No |\n| Sent | `sent` | Sent to taxpayer for approval | \u274c No |\n| Approved | `approved` | Approved, ready for SRI submission | \u274c No |\n| Rejected | `rejected` | Rejected, requires corrections | \u274c No |\n| SRI Sended | `sri_sended` | Being sent to SRI | \u274c No |\n| SRI Completed | `sri_sended_completed` | SRI processing completed | \u274c No |\n| Declared | `declared` | Successfully declared in SRI | \u274c No |\n| Error | `error` | Error during SRI submission | \u274c No |\n\n### State Transitions Matrix\n\n| From State | Allowed Transitions | Endpoints |\n|------------|---------------------|-----------|\n| `draft` | \u2192 `edited`, `saved` | `\/save` |\n| `edited` | \u2192 `draft`, `saved` | `\/recalculate`, `\/save` |\n| `saved` | \u2192 `draft`, `sent`, `approved`, `rejected`, `sri_sended` | `\/recalculate`, `\/send`, `\/approve`, `\/reject`, `\/send-sri-draft` |\n| `sent` | \u2192 `draft`, `approved`, `rejected` | `\/recalculate`, `\/approve`, `\/reject` |\n| `approved` | \u2192 `draft`, `sri_sended`, `declared` | `\/recalculate`, `\/send-sri-draft`, `\/mark-declared` |\n| `rejected` | \u2192 `draft` | `\/recalculate` |\n| `sri_sended` | \u2192 `sri_sended_completed`, `error` | (automatic) |\n| `sri_sended_completed` | \u2192 `draft`, `approved`, `rejected`, `declared` | `\/recalculate`, `\/approve`, `\/reject`, `\/mark-declared` |\n| `error` | \u2192 `draft`, `sri_sended` | `\/recalculate`, `\/send-sri-draft` |\n| `declared` | \u2192 `draft` | `\/recalculate` |\n\n### Common Workflows\n\n#### Workflow 1: Direct Approval (no taxpayer review)\n```\n1. POST   \/iva-reports                    \u2192 Creates report (draft)\n2. GET    \/iva-reports\/{period}           \u2192 Review calculated values\n3. PATCH  \/iva-reports\/save               \u2192 Lock for review (saved)\n4. PATCH  \/iva-reports\/approve            \u2192 Approve report (approved)\n5. POST   \/iva-reports\/send-sri-draft     \u2192 Submit to SRI (sri_sended \u2192 sri_sended_completed)\n6. PATCH  \/iva-reports\/mark-declared      \u2192 Mark as declared (declared)\n```\n\n#### Workflow 2: With Taxpayer Approval\n```\n1. POST   \/iva-reports                    \u2192 Creates report (draft)\n2. PATCH  \/iva-reports\/save               \u2192 Lock for review (saved)\n3. POST   \/iva-reports\/send               \u2192 Email to taxpayer (sent)\n4. [Taxpayer reviews and approves via link]\n5. POST   \/iva-reports\/send-sri-draft     \u2192 Submit to SRI (approved \u2192 sri_sended)\n6. PATCH  \/iva-reports\/mark-declared      \u2192 Mark as declared (declared)\n```\n\n#### Workflow 3: SRI Draft First, Then Approval\n```\n1. POST   \/iva-reports                    \u2192 Creates report (draft)\n2. PATCH  \/iva-reports\/save               \u2192 Lock for review (saved)\n3. POST   \/iva-reports\/send-sri-draft     \u2192 Submit draft to SRI (sri_sended \u2192 sri_sended_completed)\n4. POST   \/iva-reports\/send               \u2192 Email to taxpayer (sent)\n5. [Taxpayer approves via link]\n6. PATCH  \/iva-reports\/mark-declared      \u2192 Mark as declared (declared)\n```\n\n#### Workflow 4: Rejection & Correction\n```\n1. POST   \/iva-reports                    \u2192 Creates report (draft)\n2. PATCH  \/iva-reports\/save               \u2192 Lock for review (saved)\n3. POST   \/iva-reports\/send               \u2192 Email to taxpayer (sent)\n4. PATCH  \/iva-reports\/reject             \u2192 Reject with comments (rejected)\n5. POST   \/iva-reports\/recalculate        \u2192 Reset to draft (draft)\n6. [Add missing documents, correct errors]\n7. PATCH  \/iva-reports\/save               \u2192 Save again (saved)\n8. PATCH  \/iva-reports\/approve            \u2192 Approve (approved)\n```\n\n### Endpoints That Don't Require Transitions\n\nThese endpoints can be called at any time regardless of state:\n\n- **`GET \/iva-reports`** - List all reports\n- **`GET \/iva-reports\/{period}`** - View specific report details\n- **`POST \/iva-reports`** - Create new report (always starts in `draft`)\n- **`POST \/iva-reports\/recalculate`** - Reset report to `draft` (allowed from most states)\n\n### Important Notes\n\n1. **Report Identification**: Reports are uniquely identified by `taxpayer_id`, `period`, and `team_id`\n2. **Period Format**: Use `YYYY-MM` format (e.g., `2024-03`). The system auto-calculates the exact date based on taxpayer's periodicity\n3. **Automatic Calculations**: Reports are automatically calculated from issued\/received documents when created\n4. **State Validation**: All state-changing endpoints validate transitions. Invalid transitions return `400 INVALID_TRANSITION`\n5. **Idempotency**: Some endpoints are idempotent (e.g., `\/save` from `saved` state, `\/send` from `sent` state)\n\n### Error Handling\n\n- **`400 INVALID_TRANSITION`**: Attempted invalid state transition\n- **`404 NOT_FOUND`**: Report or taxpayer not found\n- **`422 VALIDATION_ERROR`**: Invalid input parameters\n- **`503 EMAIL_SEND_FAILED`**: Email service unavailable (only `\/send` endpoint)",
            "item": [
                {
                    "name": "List IVA reports for a taxpayer",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports",
                            "query": [
                                {
                                    "key": "page",
                                    "value": "",
                                    "description": "Page number for pagination.",
                                    "disabled": true
                                },
                                {
                                    "key": "per_page",
                                    "value": "",
                                    "description": "Items per page (1-100).",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "",
                                    "description": "Filter by report status.",
                                    "disabled": true
                                },
                                {
                                    "key": "periodicity",
                                    "value": "",
                                    "description": "Filter by periodicity (monthly, biannual).",
                                    "disabled": true
                                },
                                {
                                    "key": "year",
                                    "value": "",
                                    "description": "Filter by year.",
                                    "disabled": true
                                },
                                {
                                    "key": "sort",
                                    "value": "",
                                    "description": "Sort field. Prefix with - for descending.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports?page=&per_page=&status=&periodicity=&year=&sort=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves a paginated list of IVA reports for a specific taxpayer.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**Example URL:**\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/iva-reports?page=1&per_page=20&status=saved&sort=-period\n```\n\n**Available filters (all optional, sent as query params in URL):**\n- `page`: Page number for pagination (default: 1)\n- `per_page`: Items per page, 1-100 (default: 20)\n- `status`: Filter by report status\n- `periodicity`: Filter by periodicity (monthly, biannual)\n- `year`: Filter by year\n- `sort`: Sort field. Prefix with `-` for descending (e.g., `-period`, `status`)\n\n**Available statuses:**\n- `draft`: Initial state, being edited\n- `edited`: Has manual edits\n- `saved`: Ready for review\n- `sent`: Sent to taxpayer for approval\n- `approved`: Approved and ready for SRI submission\n- `rejected`: Rejected, needs corrections\n- `sri_sended`: Sent to SRI (in progress)\n- `sri_sended_completed`: SRI processing completed\n- `declared`: Marked as declared\n- `error`: Error during SRI submission"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Reports retrieved successfully\",\n  \"data\": {\n    \"reports\": [\n      {\n        \"id\": \"01HZXXX123ABC456\",\n        \"tax_payer_id\": 123,\n        \"period\": \"2024-03-15\",\n        \"periodicity\": \"monthly\",\n        \"status\": \"saved\",\n        \"status_label\": \"Guardado\",\n        \"total_sales_raw_value\": 15000.00,\n        \"total_taxes_to_pay_iva\": 1200.50,\n        \"created_at\": \"2024-03-01T09:00:00.000000Z\",\n        \"updated_at\": \"2024-03-05T14:30:00.000000Z\"\n      },\n      {\n        \"id\": \"01HZXXX123ABC789\",\n        \"tax_payer_id\": 123,\n        \"period\": \"2024-02-15\",\n        \"periodicity\": \"monthly\",\n        \"status\": \"declared\",\n        \"status_label\": \"Declarado\",\n        \"total_sales_raw_value\": 12500.00,\n        \"total_taxes_to_pay_iva\": 980.00,\n        \"created_at\": \"2024-02-01T10:15:00.000000Z\",\n        \"updated_at\": \"2024-02-20T16:45:00.000000Z\"\n      }\n    ]\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"current_page\": 1,\n      \"per_page\": 20,\n      \"total\": 24,\n      \"total_pages\": 2,\n      \"from\": 1,\n      \"to\": 20\n    }\n  }\n}",
                            "name": "Success"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"status\": [\"Invalid status value\"]\n  }\n}",
                            "name": "Invalid filter"
                        }
                    ]
                },
                {
                    "name": "Create a new IVA report",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\"}"
                        },
                        "description": "Creates a new IVA report for the specified period if it doesn't already exist.\nThe report is created in DRAFT status with all values calculated automatically from:\n- Sales invoices and credit notes\n- Purchase bills and credit notes\n- Withholding documents\n\n**Important notes:**\n- If a report already exists for the period, it returns the existing one (idempotent)\n- The period is converted to a full date based on taxpayer's periodicity\n- Monthly taxpayers: YYYY-MM \u2192 YYYY-MM-15\n- Biannual taxpayers: Only YYYY-06 or YYYY-12 allowed\n- This process may take 3-5 seconds as it calculates from all documents\n\n**Workflow:**\n1. Validates period format\n2. Checks if report already exists\n3. Queries all documents for the period\n4. Calculates sales, purchases, and tax totals\n5. Creates report in DRAFT status\n6. Records initial status in history"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report already exists for this period\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"saved\",\n      \"status_label\": \"Guardado\",\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"created_at\": \"2024-03-01T09:00:00.000000Z\",\n      \"updated_at\": \"2024-03-05T14:30:00.000000Z\"\n    }\n  }\n}",
                            "name": "Report already exists"
                        },
                        {
                            "header": [],
                            "code": 201,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report created successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"draft\",\n      \"status_label\": \"Borrador\",\n      \"local_sales_different_0_rate_raw_value\": 10000.00,\n      \"local_sales_different_0_rate_iva\": 1200.00,\n      \"total_sales_raw_value\": 15000.00,\n      \"total_sales_iva\": 1800.00,\n      \"purchases_different_0_rate_with_right_iva\": 600.00,\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"total_invoices_issued\": 45,\n      \"created_at\": \"2024-03-01T09:00:00.000000Z\",\n      \"updated_at\": \"2024-03-01T09:00:00.000000Z\"\n    }\n  }\n}",
                            "name": "Report created successfully"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"period\": [\"Period must be in YYYY-MM format (e.g., 2024-03)\"]\n  }\n}",
                            "name": "Invalid period format"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"period\": [\"For biannual periodicity, period must be YYYY-06 or YYYY-12\"]\n  }\n}",
                            "name": "Invalid period for biannual"
                        }
                    ]
                },
                {
                    "name": "Get a specific IVA report",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/:period",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/:period",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "period",
                                    "key": "period",
                                    "value": "2024-03",
                                    "description": "Period in YYYY-MM format."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves detailed information for a specific IVA report identified by period.\nReturns all calculated fields including sales, purchases, tax credits, and final tax amount.\n\n**IMPORTANT:** This is a GET request. Do NOT send a request body.\n\n**Example URL:**\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/iva-reports\/2024-03\n```\n\n**Period Format:**\nThe period parameter uses YYYY-MM format and is automatically converted to the full date\nbased on the taxpayer's periodicity:\n- **Monthly**: `2024-03` becomes `2024-03-15`\n- **Biannual**: `2024-06` becomes `2024-06-15` (first semester) or `2024-12` becomes `2024-12-15` (second semester)"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report retrieved successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"saved\",\n      \"status_label\": \"Guardado\",\n      \"public_link\": \"https:\/\/app.taxo.ec\/public\/reports\/abc123\",\n      \"comments\": null,\n      \"report_comments\": \"Reporte revisado\",\n      \"vat_declaration_pdf\": null,\n      \"vat_payment_receipt_pdf\": null,\n      \"local_sales_different_0_rate_raw_value\": 10000.00,\n      \"local_sales_different_0_rate_iva\": 1200.00,\n      \"total_sales_raw_value\": 15000.00,\n      \"total_sales_iva\": 1800.00,\n      \"purchases_different_0_rate_with_right_raw_value\": 5000.00,\n      \"purchases_different_0_rate_with_right_iva\": 600.00,\n      \"total_acquisitions_and_payments_raw_value\": 6500.00,\n      \"total_acquisitions_and_payments_iva\": 780.00,\n      \"purchases_tax_credit_applicable_period_iva\": 780.00,\n      \"tax_caused_iva\": 1800.00,\n      \"total_tax_credit_period_iva\": 780.00,\n      \"subtotal_to_pay_iva\": 1020.00,\n      \"total_taxes_to_pay_iva\": 1020.00,\n      \"total_invoices_issued\": 45,\n      \"total_invoices_canceled\": 2,\n      \"documents_generated_period\": 128,\n      \"created_at\": \"2024-03-01T09:00:00.000000Z\",\n      \"updated_at\": \"2024-03-05T14:30:00.000000Z\"\n    }\n  }\n}",
                            "name": "Success"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"period\": [\"Invalid period format. Expected YYYY-MM (e.g., 2024-03)\"]\n  }\n}",
                            "name": "Invalid period format"
                        }
                    ]
                },
                {
                    "name": "Recalculate IVA report (Update Report)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/recalculate",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/recalculate",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\"}"
                        },
                        "description": "Resets the report to DRAFT status and recalculates all values from current documents.\nThis is the API equivalent of the \"Actualizar reporte\" button in the UI.\n\n**Use cases:**\n- New invoices\/bills were added after creating the report\n- Documents were corrected or updated\n- Need to refresh calculations with latest data\n- Reset report from any state back to draft\n\n**What this endpoint does:**\n1. Validates the report exists for the period\n2. Clears uploaded PDF files (vat_declaration_pdf, vat_payment_receipt_pdf)\n3. Transitions report status to DRAFT (allowed from any state)\n4. Queries all documents for the period again\n5. Recalculates all sales, purchases, and tax totals\n6. Records the status change in history\n\n**Warning:** This action will overwrite any manual edits made to the report."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report recalculated successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"draft\",\n      \"status_label\": \"Borrador\",\n      \"vat_declaration_pdf\": null,\n      \"vat_payment_receipt_pdf\": null,\n      \"total_sales_raw_value\": 16500.00,\n      \"total_sales_iva\": 1980.00,\n      \"total_taxes_to_pay_iva\": 1350.75,\n      \"total_invoices_issued\": 52,\n      \"updated_at\": \"2024-03-10T15:45:00.000000Z\"\n    }\n  }\n}",
                            "name": "Successfully recalculated"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot transition from sri_sended to draft\",\n  \"code\": \"INVALID_TRANSITION\"\n}",
                            "name": "Invalid transition (should not happen)"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"period\": [\"Period must be in YYYY-MM format (e.g., 2024-03)\"]\n  }\n}",
                            "name": "Invalid period format"
                        }
                    ]
                },
                {
                    "name": "Save IVA report",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/save",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/save",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\",\"comments\":\"Reporte revisado, valores correctos\"}"
                        },
                        "description": "Saves the report by changing its status from DRAFT\/EDITED to SAVED.\nA saved report is locked from further edits and ready for approval workflow.\nOptionally adds comments to document any observations or notes.\n\n**When to use:**\n- After reviewing calculated values in draft\n- Before sending to taxpayer for approval\n- When report data is final and correct\n\n**Valid transitions:**\n- DRAFT \u2192 SAVED\n- EDITED \u2192 SAVED\n\n**After saving, you can:**\n- Send report via email for approval (`\/send`)\n- Directly approve as accountant (`\/approve`)\n- Reject if issues found (`\/reject`)"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report saved successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"saved\",\n      \"status_label\": \"Guardado\",\n      \"report_comments\": \"Reporte revisado, valores correctos\",\n      \"total_sales_raw_value\": 15000.00,\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"updated_at\": \"2024-03-05T14:30:00.000000Z\"\n    }\n  }\n}",
                            "name": "Successfully saved"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot transition from approved to saved\",\n  \"code\": \"INVALID_TRANSITION\"\n}",
                            "name": "Invalid status"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"comments\": [\"Comments cannot exceed 500 characters\"]\n  }\n}",
                            "name": "Validation error"
                        }
                    ]
                },
                {
                    "name": "Approve IVA report",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/approve",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/approve",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\",\"comments\":\"Valores verificados, aprobado para env\u00edo al SRI\"}"
                        },
                        "description": "Approves the report, changing its status to APPROVED.\nThis indicates the report has been reviewed and validated by an accountant\nand is ready for submission to the SRI (Tax Authority).\n\n**Approval means:**\n- All values have been verified\n- Report is accurate and complete\n- Ready for tax authority submission\n- No further changes from taxpayer needed\n\n**Valid transitions:**\n- SAVED \u2192 APPROVED (direct approval without sending)\n- SENT \u2192 APPROVED (after taxpayer received via email)\n\n**After approval, you can:**\n- Send to SRI draft (`\/send-sri-draft`)\n- Mark as manually declared (`\/mark-declared`)\n- Reset if needed (`\/recalculate`)"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report approved successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"approved\",\n      \"status_label\": \"Aprobado\",\n      \"comments\": [\n        {\n          \"status\": \"approved\",\n          \"comment\": \"Valores verificados, aprobado para env\u00edo al SRI\",\n          \"timestamp\": \"2024-03-06T10:30:00Z\"\n        }\n      ],\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"updated_at\": \"2024-03-06T10:30:00.000000Z\"\n    }\n  }\n}",
                            "name": "Successfully approved"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot transition from draft to approved. Report must be in 'saved' or 'sent' status\",\n  \"code\": \"INVALID_TRANSITION\"\n}",
                            "name": "Invalid status transition"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"period\": [\"Period must be in YYYY-MM format (e.g., 2024-03)\"]\n  }\n}",
                            "name": "Validation error"
                        }
                    ]
                },
                {
                    "name": "Reject IVA report",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/reject",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/reject",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\",\"comments\":\"Hay errores en las facturas de compras del d\u00eda 15. Falta incluir factura #001-001-000123456\"}"
                        },
                        "description": "Rejects the report, changing its status to REJECTED.\nThis action requires detailed comments explaining why the report was rejected.\nUsed when errors or inconsistencies are found during review.\n\n**Rejection means:**\n- Report has errors or inconsistencies\n- Corrections are needed before approval\n- Report must be recalculated or edited\n- Clear feedback must be provided\n\n**Valid transitions:**\n- SAVED \u2192 REJECTED\n- SENT \u2192 REJECTED (taxpayer or accountant found issues)\n\n**After rejection:**\n- Report must be recalculated (`\/recalculate`)\n- Then saved, reviewed, and re-approved\n\n**Important:** Comments are REQUIRED (minimum 10 characters) to document the rejection reason."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report rejected successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"rejected\",\n      \"status_label\": \"Rechazado\",\n      \"comments\": [\n        {\n          \"status\": \"rejected\",\n          \"comment\": \"Hay errores en las facturas de compras del d\u00eda 15. Falta incluir factura #001-001-000123456\",\n          \"timestamp\": \"2024-03-06T11:00:00Z\"\n        }\n      ],\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"updated_at\": \"2024-03-06T11:00:00.000000Z\"\n    }\n  }\n}",
                            "name": "Successfully rejected"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot transition from approved to rejected. Report must be in 'saved' or 'sent' status\",\n  \"code\": \"INVALID_TRANSITION\"\n}",
                            "name": "Invalid status transition"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"comments\": [\"Comments are required when rejecting a report\"]\n  }\n}",
                            "name": "Missing comments"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"comments\": [\"Comments must be at least 10 characters\"]\n  }\n}",
                            "name": "Comments too short"
                        }
                    ]
                },
                {
                    "name": "Mark report as declared",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/mark-declared",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/mark-declared",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\"}"
                        },
                        "description": "Marks the report as DECLARED in your database.\nThis is a LOCAL action that does NOT interact with SRI services.\n\n**When to use this endpoint:**\n- You declared the report manually on the SRI website\n- You declared through another system or platform\n- You want to skip automatic SRI submission\n- You completed the declaration offline\n\n**What this does:**\n- Changes report status to DECLARED\n- Records the status change in history\n- Marks the period as completed for this taxpayer\n- Does NOT send anything to external services\n\n**Valid transitions:**\n- APPROVED \u2192 DECLARED (skip SRI auto-submission)\n- SRI_SENDED_COMPLETED \u2192 DECLARED (after SRI processing)\n\n**After marking as declared:**\n- Report can still be recalculated if needed\n- PDFs can be uploaded (`\/upload-pdfs` - not yet implemented)\n- Status can transition to SRI_DECLARED_CONFIRMED"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report marked as declared successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"declared\",\n      \"status_label\": \"Declarado\",\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"updated_at\": \"2024-03-20T09:15:00.000000Z\"\n    }\n  }\n}",
                            "name": "Successfully marked"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot transition from draft to declared. Report must be in 'approved' or 'sri_sended_completed' status\",\n  \"code\": \"INVALID_TRANSITION\"\n}",
                            "name": "Invalid status transition"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"period\": [\"Period must be in YYYY-MM format (e.g., 2024-03)\"]\n  }\n}",
                            "name": "Validation error"
                        }
                    ]
                },
                {
                    "name": "Send IVA report via email",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/send",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/send",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\",\"emails\":[\"cliente@example.com\",\"contabilidad@empresa.com\"],\"comments\":\"Por favor revisar los totales de ventas y confirmar\"}"
                        },
                        "description": "Sends the IVA report via email to the taxpayer or specified recipients for review and approval.\nThis is an EXTERNAL COMMUNICATION action that actually sends emails through SMTP.\n\n**What this endpoint does:**\n1. Validates the report is in SAVED or SENT status\n2. Generates a PDF of the report (if not cached)\n3. Sends email with PDF attachment to specified addresses\n4. Records each recipient in share logs for audit\n5. Changes report status to SENT (if not already)\n6. Registers status change in history\n\n**Email recipients:**\n- If `emails` parameter provided: sends to those addresses\n- If `emails` is empty: uses taxpayer's registered email\n- Maximum 10 email addresses per request\n\n**Valid transitions:**\n- SAVED \u2192 SENT (first send)\n- SENT \u2192 SENT (resend to same or different recipients)\n\n**Email content includes:**\n- PDF report attachment\n- Optional comments\/message\n- Link to view report online\n- Instructions for approval\/rejection\n\n**Note:** This operation may take 5-10 seconds depending on SMTP server response."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report sent successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"sent\",\n      \"status_label\": \"Enviado para revisi\u00f3n\",\n      \"report_comments\": \"Por favor revisar los totales de ventas y confirmar\",\n      \"public_link\": \"https:\/\/app.taxo.ec\/public\/reports\/abc123def\",\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"updated_at\": \"2024-03-06T12:00:00.000000Z\"\n    },\n    \"recipients\": [\"cliente@example.com\", \"contabilidad@empresa.com\"]\n  }\n}",
                            "name": "Successfully sent"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot send report from status draft. Report must be in 'saved' or 'sent' status\",\n  \"code\": \"INVALID_STATUS\"\n}",
                            "name": "Invalid status"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"emails\": [\"No email addresses provided and taxpayer has no registered email\"]\n  }\n}",
                            "name": "No recipients"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"emails\": [\"Cannot send to more than 10 email addresses\"]\n  }\n}",
                            "name": "Too many emails"
                        },
                        {
                            "header": [],
                            "code": 503,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Failed to send email: Connection to SMTP server failed\",\n  \"code\": \"EMAIL_SEND_FAILED\"\n}",
                            "name": "SMTP error"
                        }
                    ]
                },
                {
                    "name": "Send report to SRI draft",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/iva-reports\/send-sri-draft",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/iva-reports\/send-sri-draft",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"period\":\"2024-03\"}"
                        },
                        "description": "Sends the report to the SRI (Ecuadorian Tax Authority) draft\/borrador system.\nThis creates a DRAFT in the SRI system for validation, NOT a final declaration.\nThis is an EXTERNAL COMMUNICATION action that calls SRI web services.\n\n**Important notes:**\n- This creates a DRAFT (borrador) in SRI, not a final declaration\n- After draft creation, you must finalize it on SRI website\n- The process is asynchronous (uses webhooks or timeout)\n- May take several minutes to complete\n\n**The complete workflow:**\n1. Validates report is APPROVED or ERROR (for retry)\n2. Creates JSON representation of report (Form 104)\n3. Calls SRI API to create draft\n4. Changes status to SRI_SENDED (processing)\n5. Queues timeout job (15 minutes safety net)\n6. Awaits SRI webhook response:\n   - Success \u2192 SRI_SENDED_COMPLETED\n   - Failure \u2192 ERROR\n7. Timeout if no webhook received\n\n**Valid transitions:**\n- APPROVED \u2192 SRI_SENDED (first submission)\n- ERROR \u2192 SRI_SENDED (retry after error)\n\n**After successful SRI draft:**\n- Wait for webhook (usually 2-5 minutes)\n- Check report status via GET endpoint\n- When SRI_SENDED_COMPLETED, mark as declared\n\n**Requirements:**\n- Taxpayer must have valid digital signature configured\n- All report values must be valid\n- SRI services must be operational\n\n**Note:** This operation typically takes 5-10 seconds for the API call,\nplus 2-5 minutes for SRI processing (webhook notification)."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Report sent to SRI draft successfully\",\n  \"data\": {\n    \"report\": {\n      \"id\": \"01HZXXX123ABC456\",\n      \"tax_payer_id\": 123,\n      \"period\": \"2024-03-15\",\n      \"periodicity\": \"monthly\",\n      \"status\": \"sri_sended\",\n      \"status_label\": \"Borrador SRI en progreso\",\n      \"total_taxes_to_pay_iva\": 1200.00,\n      \"updated_at\": \"2024-03-07T10:00:00.000000Z\"\n    }\n  }\n}",
                            "name": "Successfully sent to SRI"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Cannot send to SRI from status saved. Report must be in 'approved' or 'error' status\",\n  \"code\": \"INVALID_STATUS\"\n}",
                            "name": "Invalid status"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Report not found for period 2024-03\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Report not found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Failed to create report JSON: Missing required field\",\n  \"code\": \"JSON_CREATION_FAILED\"\n}",
                            "name": "JSON creation failed"
                        },
                        {
                            "header": [],
                            "code": 503,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"SRI service is unavailable or timeout\",\n  \"code\": \"SRI_UNAVAILABLE\"\n}",
                            "name": "SRI unavailable"
                        },
                        {
                            "header": [],
                            "code": 503,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"SRI service returned an error\",\n  \"code\": \"SRI_ERROR\",\n  \"errors\": {\n    \"sri_response\": {\n      \"status\": \"error\",\n      \"message\": \"Invalid signature\"\n    }\n  }\n}",
                            "name": "SRI error response"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Received Documents",
            "description": "\nAPI endpoints for managing received documents (purchase documents from suppliers).\n\n## Document Types\n\nReceived documents include:\n- **Invoices (Facturas de Compra)**: Standard purchase invoices from suppliers\n- **Credit Notes**: Applied to invoices\n- **Withholdings**: Tax withholding documents\n\n## Filtering & Categorization\n\n### Date Filtering\n- **Default**: Current month if no dates provided\n- **start_date**: Filter from this date (YYYY-MM-DD)\n- **end_date**: Filter until this date (YYYY-MM-DD)\n\n### Category Filtering\n\nThe system supports two types of categorization:\n\n1. **Document-level categorization (mono-category)**: All items in the document share the same category\n2. **Item-level categorization (multi-category)**: Each line item has its own category\n\n**How Category Filters Work:**\n\nBoth category filters search at the **item level** (bill_items table). If **any item** in a document \nmatches the filter criteria, the **entire document** is included in the results.\n\n**Example:**\n```\nDocument #001:\n  - Item 1: Category \"Office Supplies\" (id: 123)\n  - Item 2: Category \"Services\" (id: 456)\n  - Item 3: Category \"Office Supplies\" (id: 123)\n\nFilter: category_id[]=123\nResult: \u2713 Document #001 is included (has items with category 123)\n```\n\n**Category filters:**\n\n- `category_id[]`: Filter by specific category ID(s) - array parameter (can pass multiple)\n  \n  **Searches in:** `bill_items.tax_payer_category_id` (line item categories)\n  \n  **Note:** To obtain the available category IDs for a taxpayer, use the categories endpoint:\n  `GET \/api\/v1\/taxpayers\/{taxNumber}\/categories`\n  \n  Each taxpayer has their own custom categories. You must retrieve the category IDs \n  from this endpoint before filtering by `category_id[]`.\n  \n- `category_type`: Filter by expense type - single value parameter\n  \n  **Searches in:** `bills.category_types` (JSON field that summarizes item categories)\n  \n  **Available values:**\n  - `commercial_expenses`: Business-related expenses (Actividad Comercial)\n  - `personal_expenses`: Personal expenses (Gasto Personal)\n  - `non_deductible_expenses`: Non-deductible expenses (No Deducible)\n\n### Deductibility Filtering\n- `deductible_type`: Filter by tax deductibility - single value parameter\n  - `deductible`: Tax-deductible expenses (Con derecho a cr\u00e9dito tributario)\n  - `non_deductible`: Non-deductible expenses (Sin derecho a cr\u00e9dito tributario)\n\n### Status Filtering\n- `status`: Filter by document status - single value parameter\n  - `AUTORIZADO`: Authorized\/valid documents\n  - `ANULADO`: Voided documents\n\n### Search & Other Filters\n- `search`: Search in provider name, RUC, email, phone, document number, or access key\n- `uncategorized`: Filter uncategorized documents (boolean: true\/false)\n- `origin`: Filter by document origin\/source system - single value parameter\n  - `tws`: Documents automatically processed by Taxo Web Services from SRI\n  - `xml-import`: Documents manually imported from XML files\n  - `physical-upload`: Physical documents uploaded\/entered manually by user\n\n**Note:** Most filters accept a single value.\nOnly `category_id` accepts multiple values using array notation `category_id[]=123&category_id[]=456`.\n\n## Sorting\n\nDefault sort: `-date_only,-bill_number` (newest first, then by number descending)\n\nAvailable sort fields (prefix with `-` for descending):\n- `date_only`: Document date\n- `bill_number`: Document number\n- `contact_name`: Provider name\n- `sub_total`: Subtotal amount\n- `total`: Total amount\n\n**Example:** `sort=-total,date_only` (highest total first, then oldest date)\n\n\n## Important Notes\n\n1. **Consistent Results**: This API uses the same services and repositories as the UI, ensuring identical results\n2. **Performance**: The endpoint uses optimized queries with lazy loading for related data\n3. **Pagination**: Results are paginated (default 20 items per page, max 100)\n4. **Timezone**: All dates are in UTC. Document dates (`billed_at`) show local Ecuador time",
            "item": [
                {
                    "name": "List received documents for a taxpayer",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "page",
                                    "value": "",
                                    "description": "Page number for pagination. Default: 1.",
                                    "disabled": true
                                },
                                {
                                    "key": "per_page",
                                    "value": "",
                                    "description": "Items per page (1-100). Default: 20.",
                                    "disabled": true
                                },
                                {
                                    "key": "sort",
                                    "value": "",
                                    "description": "Sort field. Allowed values: date_only (document date), contact_name (supplier name), sub_total (subtotal amount), bill_number (document number). Prefix with \"-\" for descending order. You can combine multiple sorts with commas. Examples: \"-date_only\" (newest first), \"contact_name\" (A-Z), \"-sub_total,date_only\" (highest amount first, then by date). Default: -date_only,-bill_number.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_id%5B%5D",
                                    "value": "",
                                    "description": "Filter by category ID(s). Can pass multiple values using array notation. To obtain available category IDs for the taxpayer, use GET \/api\/v1\/taxpayers\/{taxNumber}\/categories.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_type",
                                    "value": "",
                                    "description": "Filter by expense type. Must be one of: commercial_expenses, personal_expenses, non_deductible_expenses.",
                                    "disabled": true
                                },
                                {
                                    "key": "deductible_type",
                                    "value": "",
                                    "description": "Filter by tax deductibility. Must be one of: deductible, non_deductible.",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "",
                                    "description": "Filter by document status. Must be one of: AUTORIZADO, ANULADO.",
                                    "disabled": true
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "description": "Search in provider name, document number, access key, RUC, email, or phone.",
                                    "disabled": true
                                },
                                {
                                    "key": "uncategorized",
                                    "value": "",
                                    "description": "Filter only uncategorized documents. Accepts: true\/false, 1\/0, yes\/no, on\/off.",
                                    "disabled": true
                                },
                                {
                                    "key": "origin",
                                    "value": "",
                                    "description": "Filter by document origin\/source system. Must be one of: tws, xml-import, physical-upload.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received?start_date=&end_date=&page=&per_page=&sort=&category_id%5B%5D=&category_type=&deductible_type=&status=&search=&uncategorized=&origin=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves a paginated list of received documents (purchase invoices) for a specific taxpayer.\nThis endpoint returns the same data as the UI received documents listing.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**Example URLs:**\n\nBasic query with date range:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?start_date=2024-01-01&end_date=2024-01-31&page=1&per_page=20\n```\n\nWith filters for commercial deductible expenses:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?category_type=commercial_expenses&deductible_type=deductible&status=AUTORIZADO\n```\n\n**Important - HTTP Headers:**\n- **Required headers**: `x-api-key`, `x-organization-id`, `Accept: application\/json`\n- **Do NOT send**: `Content-Type: application\/json` (this is a GET request, parameters go in the URL)\n- Sending `Content-Type` header can cause parameter parsing issues in some environments\n\n**Filter Format:** All filters use top-level query parameters (consistent with TaxPayers and IVA Reports endpoints).\n\n**Filtering Examples:**\n\nFilter by category type (commercial expenses only):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?category_type=commercial_expenses\n```\n\nFilter by deductibility (only deductible):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?deductible_type=deductible\n```\n\nFilter by specific categories (multiple IDs allowed):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?category_id[]=123&category_id[]=456\n```\n*Note: First retrieve available categories from GET \/api\/v1\/taxpayers\/{taxNumber}\/categories*\n\nFilter by status (authorized documents only):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?status=AUTORIZADO\n```\n\nSearch providers:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?search=PROVEEDOR\n```\n\nFilter only uncategorized:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?uncategorized=true\n```\n\nFilter by origin (electronic documents only):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?origin=tws\n```\n\n**Sorting Examples:**\n\nSort by highest amount first:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?sort=-sub_total\n```\n\nSort by supplier name alphabetically (A-Z):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?sort=contact_name\n```\n\nSort by newest first (default), then by document number:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?sort=-date_only,-bill_number\n```\n\nMultiple filters combined with sorting (real use case):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received?start_date=2024-01-01&end_date=2024-01-31&category_type=commercial_expenses&deductible_type=deductible&status=AUTORIZADO&sort=-sub_total\n```"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents retrieved successfully\",\n  \"data\": {\n    \"bills\": [\n      {\n        \"id\": 12345,\n        \"ulid\": \"01HZXXX123ABC456\",\n        \"bill_number\": \"001-001-000001234\",\n        \"access_key\": \"0101202401172605128500110010010000012341234567813\",\n        \"billed_at\": \"2024-01-15T14:30:00.000000Z\",\n        \"date_only\": \"2024-01-15\",\n        \"bill_status\": \"AUTORIZADO\",\n        \"is_physical\": false,\n        \"is_sale_note\": false,\n        \"is_locked\": false,\n        \"lock_reason\": null,\n        \"origin\": \"tws\",\n        \"document_type\": \"electronic\",\n        \"issuer\": {\n          \"tax_number\": \"1234567890001\",\n          \"business_name\": \"PROVEEDOR DEMO S.A.\",\n          \"trade_name\": \"PROVEEDOR DEMO\",\n          \"address\": \"Av. Principal 123 y Secundaria\",\n          \"email\": \"proveedor@example.com\"\n        },\n        \"payment\": {\n          \"payment_method\": \"01\",\n          \"payment_amount\": 112.00\n        },\n        \"totals\": {\n          \"subtotal_vat_zero\": 0.00,\n          \"subtotal_vat_twelve\": 100.00,\n          \"subtotal_vat_fifteen\": 0.00,\n          \"sub_total\": 100.00,\n          \"sub_total_show\": 100.00,\n          \"discount\": 0.00,\n          \"total\": 112.00\n        },\n        \"taxes\": {\n          \"vat_twelve\": 12.00,\n          \"vat_fifteen\": 0.00,\n          \"total_tax\": 12.00\n        },\n        \"categories\": [\n          {\n            \"id\": 45,\n            \"category_id\": 12,\n            \"name\": \"Servicios Profesionales\",\n            \"color\": \"bg-blue-500\",\n            \"icon\": \"M12 6v6m0 0v6m0-6h6m-6 0H6\",\n            \"count\": 1\n          }\n        ],\n        \"category_types\": [\n          {\n            \"category_type\": \"commercial_expenses\",\n            \"count\": 1\n          }\n        ],\n        \"deductible_types\": [\n          {\n            \"deductible_type\": \"deductible\",\n            \"count\": 1\n          }\n        ],\n        \"categorized_by\": [\"manual\"],\n        \"has_credit_notes\": false,\n        \"has_withholdings\": false,\n        \"voided_at\": null,\n        \"voided_origin\": null,\n        \"created_at\": \"2024-01-15T14:35:00.000000Z\",\n        \"updated_at\": \"2024-01-15T14:35:00.000000Z\"\n      }\n    ]\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"current_page\": 1,\n      \"per_page\": 20,\n      \"total\": 45,\n      \"total_pages\": 3,\n      \"from\": 1,\n      \"to\": 20\n    },\n    \"filters_applied\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-01-31\",\n      \"category_type\": \"commercial_expenses\",\n      \"deductible_type\": \"deductible\",\n      \"status\": \"AUTORIZADO\",\n      \"sort\": \"-date_only,-bill_number\"\n    }\n  }\n}",
                            "name": "Success - with bills"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents retrieved successfully\",\n  \"data\": {\n    \"bills\": []\n  },\n  \"meta\": {\n    \"pagination\": {\n      \"current_page\": 1,\n      \"per_page\": 20,\n      \"total\": 0,\n      \"total_pages\": 0,\n      \"from\": 0,\n      \"to\": 0\n    },\n    \"filters_applied\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\",\n      \"sort\": \"-date_only,-bill_number\"\n    }\n  }\n}",
                            "name": "Success - no bills found"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\",\n  \"code\": \"UNAUTHORIZED\"\n}",
                            "name": "Unauthorized"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"NOT_FOUND\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format\"],\n    \"per_page\": [\"The per page must not be greater than 100\"]\n  }\n}",
                            "name": "Invalid filter"
                        }
                    ]
                },
                {
                    "name": "Get accumulated totals for received documents",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/accumulated",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_id%5B%5D",
                                    "value": "",
                                    "description": "Filter by category ID(s). Can pass multiple values using array notation. To obtain available category IDs for the taxpayer, use GET \/api\/v1\/taxpayers\/{taxNumber}\/categories.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_type",
                                    "value": "",
                                    "description": "Filter by expense type. Must be one of: commercial_expenses, personal_expenses, non_deductible_expenses.",
                                    "disabled": true
                                },
                                {
                                    "key": "deductible_type",
                                    "value": "",
                                    "description": "Filter by tax deductibility. Must be one of: deductible, non_deductible.",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "",
                                    "description": "Filter by document status. Must be one of: AUTORIZADO, ANULADO.",
                                    "disabled": true
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "description": "Search in provider name, document number, access key, RUC, email, or phone.",
                                    "disabled": true
                                },
                                {
                                    "key": "uncategorized",
                                    "value": "",
                                    "description": "Filter only uncategorized documents. Accepts: true\/false, 1\/0, yes\/no, on\/off.",
                                    "disabled": true
                                },
                                {
                                    "key": "origin",
                                    "value": "",
                                    "description": "Filter by document origin\/source system. Must be one of: tws, xml-import, physical-upload.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/accumulated?start_date=&end_date=&category_id%5B%5D=&category_type=&deductible_type=&status=&search=&uncategorized=&origin=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves aggregated totals and statistics for received documents based on the applied filters.\nThis endpoint complements the received documents listing endpoint by providing calculated totals.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**What This Endpoint Returns:**\n\n- **Subtotals by VAT rate**: Detailed breakdown of subtotals for each VAT rate (15%, 14%, 13%, 12%, 5%, 0%, exempt, not subject)\n- **VAT amounts**: Total VAT collected at each rate\n- **Discounts**: Discounts applied at each VAT rate\n- **Header totals**: Simplified totals (subtotal, taxes, total)\n- **Document counts**: Total documents, categorized, uncategorized, voided\n- **Applied filters**: Summary of which filters were used\n\n**\u26a0\ufe0f Understanding `total_sum` vs `total_header`:**\n\nThe response includes TWO total values that may differ slightly:\n\n- **`total_sum`**: Direct sum of the `total` field from each document.\n  - This is the **OFFICIAL** total authorized by SRI for each document.\n  - **Use this for**: Official reports, tax declarations, accounting records.\n  - Example: If 3 bills have totals of 100.00, 200.00, and 300.00, then `total_sum` = 600.00\n\n- **`total_header`**: Calculated by summing adjusted subtotals + recalculated VAT per document.\n  - VAT is recalculated as: `round((subtotal - discount) * vat_rate, 2)` for each document.\n  - May differ from `total_sum` by a few cents due to rounding differences.\n  - **Use this for**: Internal consistency checks, discount distribution analysis.\n\n**Why the difference?**\nWhen documents are received, the SRI-authorized VAT may differ slightly from a strict mathematical recalculation\ndue to rounding rules applied by different systems (suppliers' systems, manual entry, XML imports, etc.).\nThe `total_sum` respects the original authorized values, while `total_header` applies uniform recalculation logic.\n\n**Recommendation:** For official purposes, always use `total_sum` as it represents the actual authorized totals.\n\n**Use Cases:**\n\n- Display statistics cards in dashboard (like UI)\n- Generate financial reports\n- Validate VAT calculations\n- Monitor categorization progress\n- Calculate tax deductions\n\n**Example URLs:**\n\nGet totals for current month:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/accumulated\n```\n\nGet totals for specific date range:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/accumulated?start_date=2024-01-01&end_date=2024-01-31\n```\n\nGet totals for commercial deductible expenses:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/accumulated?category_type=commercial_expenses&deductible_type=deductible\n```\n\n**Filters:**\n\nThis endpoint accepts the **same filters** as the bills listing endpoint:\n- `start_date`, `end_date`: Date range (defaults to current month)\n- `category_id[]`: Specific category IDs (array)\n- `category_type`: Expense type (commercial_expenses, personal_expenses, non_deductible_expenses)\n- `deductible_type`: Tax deductibility (deductible, non_deductible)\n- `status`: Document status (AUTORIZADO, ANULADO)\n- `search`: Search in provider name, RUC, document number, etc.\n- `uncategorized`: Only uncategorized documents (true\/false)\n- `origin`: Document origin (electronic, physical)\n\n**Note:** Pagination parameters (page, per_page) and sort are ignored as this endpoint returns a single aggregated result."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents accumulated totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_vat_fifteen_sum\": 75.29,\n      \"discount_vat_fifteen_sum\": 0,\n      \"vat_fifteen_sum\": 11.28,\n      \"subtotal_vat_fourteen_sum\": 0,\n      \"discount_vat_fourteen_sum\": 0,\n      \"vat_fourteen_sum\": 0,\n      \"subtotal_vat_thirteen_sum\": 0,\n      \"discount_vat_thirteen_sum\": 0,\n      \"vat_thirteen_sum\": 0,\n      \"subtotal_vat_twelve_sum\": 0,\n      \"discount_vat_twelve_sum\": 0,\n      \"vat_twelve_sum\": 0,\n      \"subtotal_vat_five_sum\": 0,\n      \"discount_vat_five_sum\": 0,\n      \"vat_five_sum\": 0,\n      \"subtotal_vat_special_sum\": 0,\n      \"discount_vat_special_sum\": 0,\n      \"vat_special_sum\": 0,\n      \"subtotal_vat_zero_sum\": 0,\n      \"discount_vat_zero_sum\": 0,\n      \"subtotal_vat_exempt_sum\": 0,\n      \"discount_vat_exempt_sum\": 0,\n      \"subtotal_vat_not_subject_sum\": 0,\n      \"discount_vat_not_subject_sum\": 0,\n      \"sub_total_sum\": 75.29,\n      \"tip_sum\": 0,\n      \"subsidy_sum\": 0,\n      \"discount_sum\": 0,\n      \"total_sum\": 86.57,\n      \"subtotal_header\": 75.29,\n      \"taxes_header\": 11.28,\n      \"subtotal_taxes_header\": 86.57,\n      \"total_header\": 86.57,\n      \"document_count\": 3,\n      \"categorized_document_count\": 3,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 0\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"date_range\": {\n        \"start_date\": \"2024-12-01\",\n        \"end_date\": \"2024-12-31\"\n      }\n    }\n  }\n}",
                            "name": "Success - Current month totals"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents accumulated totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_vat_fifteen_sum\": 50.00,\n      \"vat_fifteen_sum\": 7.50,\n      \"subtotal_vat_zero_sum\": 25.00,\n      \"sub_total_sum\": 75.00,\n      \"total_sum\": 82.50,\n      \"subtotal_header\": 75.00,\n      \"taxes_header\": 7.50,\n      \"total_header\": 82.50,\n      \"document_count\": 5,\n      \"categorized_document_count\": 5,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 0\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"date_range\": {\n        \"start_date\": \"2024-01-01\",\n        \"end_date\": \"2024-01-31\"\n      },\n      \"category_type\": \"commercial_expenses\",\n      \"deductible_type\": \"deductible\"\n    }\n  }\n}",
                            "name": "Success - Filtered by category type"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Not Found - Taxpayer does not exist"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format.\"],\n    \"category_type\": [\"Invalid category type. Must be one of: commercial_expenses, personal_expenses, non_deductible_expenses.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving accumulated totals\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get count of all received documents types",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/count",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for counting (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for counting (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/count?start_date=&end_date=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves document counts across all received document types (purchases, credit notes, withholdings)\nfor a specific taxpayer and time period.\n\nThis endpoint aggregates data from three tables:\n- **bills**: Purchase invoices (Facturas de Compra)\n- **purchase_credit_notes**: Credit notes applied to purchases (Notas de Cr\u00e9dito)\n- **purchase_withholdings**: Withholding documents (Retenciones)\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**Default Behavior:**\n- If no date range is specified, returns counts for the current month\n- Only counts documents that belong to the authenticated taxpayer and team\n\n**Use Cases:**\n- Dashboard statistics showing total documents received\n- Monthly\/period document volume analysis\n- Document type distribution reports\n- Compliance verification (ensuring all document types are being processed)\n\n**Example URLs:**\n\nGet counts for current month:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/count\n```\n\nGet counts for specific period:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/count?start_date=2024-01-01&end_date=2024-01-31\n```\n\nGet counts for entire year:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/count?start_date=2024-01-01&end_date=2024-12-31\n```"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents count retrieved successfully\",\n  \"data\": {\n    \"counts\": {\n      \"invoices\": 45,\n      \"credit_notes\": 3,\n      \"withholdings\": 12,\n      \"total\": 60\n    },\n    \"period\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - Current month"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents count retrieved successfully\",\n  \"data\": {\n    \"counts\": {\n      \"invoices\": 150,\n      \"credit_notes\": 8,\n      \"withholdings\": 45,\n      \"total\": 203\n    },\n    \"period\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-03-31\"\n    }\n  }\n}",
                            "name": "Success - Custom period"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Received documents count retrieved successfully\",\n  \"data\": {\n    \"counts\": {\n      \"invoices\": 0,\n      \"credit_notes\": 0,\n      \"withholdings\": 0,\n      \"total\": 0\n    },\n    \"period\": {\n      \"start_date\": \"2024-12-01\",\n      \"end_date\": \"2024-12-31\"\n    }\n  }\n}",
                            "name": "Success - No documents"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Not Found - Taxpayer does not exist"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format.\"],\n    \"end_date\": [\"The end date must be equal to or after the start date.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving document counts\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get accumulated retention totals",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/retentions\/accumulated",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "2024-01-01",
                                    "description": "optional Start date for filtering retentions (YYYY-MM-DD format). Defaults to first day of current month.",
                                    "disabled": false
                                },
                                {
                                    "key": "end_date",
                                    "value": "2024-01-31",
                                    "description": "optional End date for filtering retentions (YYYY-MM-DD format). Defaults to last day of current month.",
                                    "disabled": false
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/retentions\/accumulated?start_date=2024-01-01&end_date=2024-01-31",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's tax identification number (RUC - 13 digits)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves aggregated totals of withholding retentions for a specific taxpayer and team\nwithin a date range. Returns amounts withheld for VAT, Income Tax (Rent), and Special Taxes (IGT\/ISD),\nalong with their tax bases and document counts.\n\nThis endpoint is optimized for displaying retention statistics and dashboards.\nIt uses direct database aggregation for efficient calculation of totals even with large datasets.\n\n**Default Period:** If no dates are specified, the current month is used.\n\n**Important Notes:**\n- Only active (non-voided) retentions are included in the monetary totals\n- Voided retentions are counted separately but not included in amounts\n- All amounts are in USD"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Retention totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"vat_withheld\": 450.75,\n      \"rent_withheld\": 1250.00,\n      \"igt_withheld\": 0.00,\n      \"total_withheld\": 1700.75,\n      \"tax_bases\": {\n        \"vat\": 15025.00,\n        \"rent\": 12500.00,\n        \"igt\": 0.00,\n        \"total\": 27525.00\n      }\n    },\n    \"counts\": {\n      \"total_retentions\": 45,\n      \"active_retentions\": 43,\n      \"voided_retentions\": 2\n    },\n    \"period\": {\n      \"start_date\": \"2024-01-01\",\n      \"end_date\": \"2024-01-31\"\n    }\n  },\n  \"meta\": {\n    \"timestamp\": \"2024-01-15T14:30:00Z\"\n  }\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Unauthorized\",\n  \"data\": null\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"data\": null\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving retention totals\",\n  \"data\": null\n}",
                            "name": ""
                        }
                    ]
                },
                {
                    "name": "Get accumulated totals for a specific supplier (Provider)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/suppliers\/:contactTaxNumber\/totals",
                            "query": [
                                {
                                    "key": "start_date",
                                    "value": "",
                                    "description": "Start date for filtering (YYYY-MM-DD). Defaults to first day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "end_date",
                                    "value": "",
                                    "description": "End date for filtering (YYYY-MM-DD). Defaults to last day of current month.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_id%5B%5D",
                                    "value": "",
                                    "description": "Filter by category ID(s). Can pass multiple values. To obtain available category IDs, use GET \/api\/v1\/taxpayers\/{taxNumber}\/categories.",
                                    "disabled": true
                                },
                                {
                                    "key": "category_type",
                                    "value": "",
                                    "description": "Filter by expense type. Must be one of: commercial_expenses, personal_expenses, non_deductible_expenses.",
                                    "disabled": true
                                },
                                {
                                    "key": "deductible_type",
                                    "value": "",
                                    "description": "Filter by tax deductibility. Must be one of: deductible, non_deductible.",
                                    "disabled": true
                                },
                                {
                                    "key": "status",
                                    "value": "",
                                    "description": "Filter by document status. Must be one of: AUTORIZADO, ANULADO.",
                                    "disabled": true
                                },
                                {
                                    "key": "search",
                                    "value": "",
                                    "description": "Search in provider name, document number, access key, etc.",
                                    "disabled": true
                                },
                                {
                                    "key": "uncategorized",
                                    "value": "",
                                    "description": "Filter only uncategorized documents. Accepts: true\/false, 1\/0, yes\/no, on\/off.",
                                    "disabled": true
                                },
                                {
                                    "key": "origin",
                                    "value": "",
                                    "description": "Filter by document origin\/source system. Must be one of: tws, xml-import, physical-upload.",
                                    "disabled": true
                                }
                            ],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/suppliers\/:contactTaxNumber\/totals?start_date=&end_date=&category_id%5B%5D=&category_type=&deductible_type=&status=&search=&uncategorized=&origin=",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "contactTaxNumber",
                                    "key": "contactTaxNumber",
                                    "value": "1790000000001",
                                    "description": "The supplier's tax number (RUC\/CI)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves aggregated totals and statistics for received documents from a specific supplier (provider).\nThis endpoint filters all documents by the supplier's tax number and applies additional filters.\n\n**IMPORTANT:** This is a GET request. All parameters must be sent as query string parameters in the URL.\nDo NOT send a request body.\n\n**What This Endpoint Returns:**\n\n- **Subtotals by VAT rate**: Detailed breakdown of subtotals for each VAT rate\n- **VAT amounts**: Total VAT collected at each rate\n- **Discounts**: Discounts applied at each VAT rate\n- **Header totals**: Simplified totals (subtotal, taxes, total)\n- **Document counts**: Total documents, categorized, uncategorized, voided\n- **Applied filters**: Summary of which filters were used (including supplier filter)\n\n**Use Cases:**\n\n- Analyze spending with a specific supplier\n- Supplier performance reports\n- Validate supplier invoices and totals\n- Tax deduction analysis per supplier\n- Supplier comparison reports\n\n**Example URLs:**\n\nGet totals for specific supplier (current month):\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/suppliers\/1790000000001\/totals\n```\n\nGet totals for specific supplier and date range:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/suppliers\/1790000000001\/totals?start_date=2024-01-01&end_date=2024-12-31\n```\n\nGet commercial expenses totals from specific supplier:\n```\nGET \/api\/v1\/taxpayers\/1726051285001\/received\/suppliers\/1790000000001\/totals?category_type=commercial_expenses&deductible_type=deductible\n```\n\n**Filters:**\n\nThis endpoint accepts the **same filters** as `\/received\/accumulated`:\n- `start_date`, `end_date`: Date range (defaults to current month)\n- `category_id[]`: Specific category IDs (array)\n- `category_type`: Expense type (commercial_expenses, personal_expenses, non_deductible_expenses)\n- `deductible_type`: Tax deductibility (deductible, non_deductible)\n- `status`: Document status (AUTORIZADO, ANULADO)\n- `search`: Search in document details\n- `uncategorized`: Only uncategorized documents (true\/false)\n- `origin`: Document origin (electronic, physical)\n\n**Plus:** Automatically filters by `contact_tax_number` from URL parameter"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Supplier totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_vat_fifteen_sum\": 1250.50,\n      \"vat_fifteen_sum\": 187.58,\n      \"sub_total_sum\": 1250.50,\n      \"total_sum\": 1438.08,\n      \"subtotal_header\": 1250.50,\n      \"taxes_header\": 187.58,\n      \"total_header\": 1438.08,\n      \"document_count\": 12,\n      \"categorized_document_count\": 12,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 0\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"date_range\": {\n        \"start_date\": \"2024-12-01\",\n        \"end_date\": \"2024-12-31\"\n      },\n      \"supplier\": {\n        \"contact_tax_number\": \"1790000000001\"\n      }\n    }\n  }\n}",
                            "name": "Success - Supplier totals"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Supplier totals retrieved successfully\",\n  \"data\": {\n    \"totals\": {\n      \"subtotal_header\": 0.00,\n      \"taxes_header\": 0.00,\n      \"total_header\": 0.00,\n      \"document_count\": 0,\n      \"categorized_document_count\": 0,\n      \"uncategorized_document_count\": 0,\n      \"voided_document_count\": 0\n    }\n  },\n  \"meta\": {\n    \"filters_applied\": {\n      \"date_range\": {\n        \"start_date\": \"2024-12-01\",\n        \"end_date\": \"2024-12-31\"\n      },\n      \"supplier\": {\n        \"contact_tax_number\": \"1790000000001\"\n      }\n    }\n  }\n}",
                            "name": "Success - No documents from supplier"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key\",\n  \"code\": \"INVALID_API_KEY\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 403,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"You do not have access to this taxpayer\",\n  \"code\": \"TAXPAYER_ACCESS_DENIED\"\n}",
                            "name": "Forbidden - Taxpayer not accessible"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\",\n  \"code\": \"TAXPAYER_NOT_FOUND\"\n}",
                            "name": "Not Found - Taxpayer does not exist"
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Validation failed\",\n  \"code\": \"VALIDATION_ERROR\",\n  \"errors\": {\n    \"start_date\": [\"The start date field must be a valid date in YYYY-MM-DD format.\"],\n    \"category_type\": [\"Invalid category type.\"]\n  }\n}",
                            "name": "Validation Error"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving supplier totals\",\n  \"code\": \"SERVER_ERROR\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Step 1: Start xls Export (Asynchronous)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/export\/excel",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/export\/excel",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "Tax identification number (RUC\/C\u00e9dula)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application\/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\"document_type\":\"purchase\",\"start_date\":\"2025-01-01\",\"end_date\":\"2025-01-31\",\"origin\":\"tws\",\"supplier_tax_number\":\"1790000000001\",\"uncategorized\":false}"
                        },
                        "description": "**IMPORTANT: This is an asynchronous endpoint.** It starts a background export process and returns immediately.\nYou must use the returned `export_id` to poll the status endpoint until the file is ready.\n\n### Complete Workflow (3 Steps):\n\n**STEP 1: Start the export (this endpoint)**\n```bash\nPOST \/api\/v1\/taxpayers\/{taxNumber}\/received\/export\/excel\n```\nYou will receive a response like:\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",  \u2190 SAVE THIS ID!\n    \"status\": \"pending\",\n    \"polling_url\": \"\/api\/v1\/taxpayers\/1726051285001\/received\/export\/status\/exp_67abc123_1734567890\"\n  }\n}\n```\n\n**STEP 2: Poll the status (repeatedly)**\nUse the `export_id` from Step 1 to check progress:\n```bash\nGET \/api\/v1\/taxpayers\/{taxNumber}\/received\/export\/status\/{export_id}\n```\nPoll every 10-30 seconds until `status` is `completed` or `failed`.\n\n**STEP 3: Download the file**\nWhen status is `completed`, the response will include a `download_url`:\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"completed\",\n    \"progress\": 100,\n    \"download_url\": \"https:\/\/s3.amazonaws.com\/...\"  \u2190 USE THIS TO DOWNLOAD\n  }\n}\n```\nThe `download_url` is a temporary signed URL that expires in 1 hour.\n\n### Key Points:\n- \u2705 This endpoint returns immediately (HTTP 202) - the export runs in background\n- \u2705 Extract `data.export_id` from the response - you'll need it for polling\n- \u2705 Use the provided `polling_url` or construct it manually with the `export_id`\n- \u2705 Poll at any frequency (suggested: every 10 seconds for small exports, 30-60 seconds for large ones)\n- \u2705 The download URL requires no additional authentication (it's signed)\n- \u2705 If dates are not provided, defaults to current month"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 202,
                            "body": "{\n  \"success\": true,\n  \"message\": \"Export started. Use the export_id to check progress.\",\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"pending\",\n    \"document_type\": \"purchase\",\n    \"estimated_records\": 1234,\n    \"batch_size\": 1000,\n    \"estimated_time_seconds\": 60,\n    \"polling_url\": \"\/api\/v1\/taxpayers\/1726051285001\/received\/export\/status\/exp_67abc123_1734567890\",\n    \"suggested_polling_interval_seconds\": 10\n  }\n}",
                            "name": "Export started successfully - SAVE THE export_id!"
                        },
                        {
                            "header": [],
                            "code": 400,
                            "body": "{\n  \"success\": false,\n  \"message\": \"El tipo de documento es requerido.\",\n  \"errors\": {\n    \"document_type\": [\"El tipo de documento es requerido.\"]\n  }\n}",
                            "name": "Invalid data"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Taxpayer not found or does not belong to your team.\"\n}",
                            "name": "Taxpayer not found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Error al iniciar la exportaci\u00f3n de documentos recibidos.\"\n}",
                            "name": "Server error"
                        }
                    ]
                },
                {
                    "name": "Step 2: Check xls Export Status (Polling)",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/export\/status\/:exportId",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/export\/status\/:exportId",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "Tax identification number (RUC\/C\u00e9dula)."
                                },
                                {
                                    "id": "exportId",
                                    "key": "exportId",
                                    "value": "exp_67abc123_1734567890",
                                    "description": "Export ID obtained from the start export endpoint (data.export_id)."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            }
                        ],
                        "body": null,
                        "description": "**Use this endpoint to check if your export is ready.** Poll this endpoint repeatedly\nusing the `export_id` you received from the start export endpoint until the status is `completed`.\n\n### How to Use This Endpoint:\n\n**1. Get the export_id**\nAfter calling `POST \/api\/v1\/taxpayers\/{taxNumber}\/received\/export\/excel`, you'll receive:\n```json\n{\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",  \u2190 USE THIS ID HERE\n    \"polling_url\": \"\/api\/v1\/taxpayers\/1726051285001\/received\/export\/status\/exp_67abc123_1734567890\"\n  }\n}\n```\n\n**2. Poll this endpoint**\n```bash\nGET \/api\/v1\/taxpayers\/{taxNumber}\/received\/export\/status\/exp_67abc123_1734567890\n                                                         \u2514\u2500 YOUR export_id goes here\n```\n\n**3. Check the status field**\n- `pending` \u2192 Keep polling (export is queued)\n- `processing` \u2192 Keep polling (export is being generated)\n- `completed` \u2192 **STOP POLLING** and extract `download_url` from response\n- `failed` \u2192 Stop polling (check `error_message`)\n\n**4. When completed, download the file**\n```json\n{\n  \"data\": {\n    \"status\": \"completed\",\n    \"download_url\": \"https:\/\/s3.amazonaws.com\/...\"  \u2190 DOWNLOAD FROM HERE\n  }\n}\n```\nSimply make a GET request to the `download_url` - no authentication needed (it's signed).\n\n### Polling Strategy:\n- **Small exports (< 1000 records)**: Poll every 10 seconds\n- **Medium exports (1000-10000 records)**: Poll every 20-30 seconds\n- **Large exports (> 10000 records)**: Poll every 30-60 seconds\n- You can poll at any frequency you want - the suggestion is just to avoid unnecessary requests\n- The export will be processed regardless of polling frequency\n\n### About the Download URL:\n- \u2705 It's a temporary AWS S3 signed URL\n- \u2705 Valid for 1 hour after export completion\n- \u2705 No additional authentication required (signature is in the URL)\n- \u2705 Direct download - just make a GET request to it\n- \u26a0\ufe0f Download the file within 1 hour or it will expire\n\n### Progress Tracking:\nWhile the export is `processing`, you'll receive:\n- `progress`: Percentage completed (0-100)\n- `processed_records` \/ `total_records`: Exact counts\n- `estimated_time_remaining_seconds`: Rough estimate"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"pending\",\n    \"progress\": 0,\n    \"total_records\": 1234,\n    \"processed_records\": 0,\n    \"file_name\": \"Compras - Periodo 2025-01-01_2025-01-31.xlsx\",\n    \"download_url\": null\n  }\n}",
                            "name": "Status: pending (keep polling)"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"processing\",\n    \"progress\": 45.5,\n    \"total_records\": 1234,\n    \"processed_records\": 562,\n    \"current_batch\": 3,\n    \"file_name\": \"Compras - Periodo 2025-01-01_2025-01-31.xlsx\",\n    \"estimated_time_remaining_seconds\": 30,\n    \"download_url\": null\n  }\n}",
                            "name": "Status: processing (keep polling)"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"completed\",\n    \"progress\": 100,\n    \"total_records\": 1234,\n    \"processed_records\": 1234,\n    \"file_name\": \"Compras - Periodo 2025-01-01_2025-01-31.xlsx\",\n    \"download_url\": \"https:\/\/s3.amazonaws.com\/taxo-exports\/exp_67abc123_1734567890.xlsx?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=...\",\n    \"download_expires_at\": \"2025-01-10T15:30:00Z\"\n  }\n}",
                            "name": "Status: completed (STOP POLLING - Download file from download_url)"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"success\": true,\n  \"data\": {\n    \"export_id\": \"exp_67abc123_1734567890\",\n    \"status\": \"failed\",\n    \"progress\": 0,\n    \"error_message\": \"No se pudieron procesar los documentos.\",\n    \"total_records\": 0,\n    \"processed_records\": 0,\n    \"download_url\": null\n  }\n}",
                            "name": "Status: failed (stop polling)"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Export not found\"\n}",
                            "name": "Export not found (wrong export_id or expired)"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Error al obtener el estado de la exportaci\u00f3n.\"\n}",
                            "name": "Server error"
                        }
                    ]
                },
                {
                    "name": "Import Physical Purchase Document",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/physical-documents",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/physical-documents",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "Tax identification number (RUC\/C\u00e9dula)."
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "multipart\/form-data"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "category_id",
                                    "value": "123",
                                    "type": "text",
                                    "description": "optional Category ID for this document. You can get available categories from other endpoints."
                                },
                                {
                                    "key": "total_value",
                                    "value": "150.50",
                                    "type": "text",
                                    "description": "optional Total value of the document. Can be 0 if you want accountant to fill it later. Default: 0."
                                },
                                {
                                    "key": "vat_type",
                                    "value": "12",
                                    "type": "text",
                                    "description": "optional Type of VAT applied. Default: \"0\"."
                                },
                                {
                                    "key": "document_date",
                                    "value": "2026-01-22",
                                    "type": "text",
                                    "description": "optional Date of the document in YYYY-MM-DD format. Cannot be in the future. Default: today."
                                },
                                {
                                    "key": "notes",
                                    "value": "Compra de suministros de oficina",
                                    "type": "text",
                                    "description": "optional Additional notes about the document (max 1000 characters)."
                                },
                                {
                                    "key": "contact_tax_number",
                                    "value": "1234567890001",
                                    "type": "text",
                                    "description": "optional Tax number (RUC\/CI) of the supplier (max 20 characters)."
                                },
                                {
                                    "key": "files[]",
                                    "src": [],
                                    "type": "file"
                                }
                            ]
                        },
                        "description": "Upload one or more files (images or PDFs) representing a physical purchase document.\nThis is useful when you have scanned receipts, invoices, or other purchase documents\nthat need to be stored in the system for later review by an accountant.\n\n### Use Case:\nThis endpoint allows you to quickly upload physical document files without manually\nentering all the details. An accountant can later review the uploaded images through\nthe web interface and complete the information (update totals, VAT type, category, etc.).\n\n\n### File Requirements:\n- **Types allowed**: PDF, JPG, JPEG, PNG\n- **Max size per file**: 10 MB\n- **Min files**: 1\n- **Max files**: 5\n\n### VAT Types (vat_type):\n- `\"0\"` - VAT 0% (default if not specified)\n- `\"5\"` - VAT 5%\n- `\"12\"` - VAT 12% (historical)\n- `\"13\"` - VAT 13% (historical)\n- `\"14\"` - VAT 14% (historical)\n- `\"15\"` - VAT 15%\n- `\"exempt\"` - Exempt from VAT\n- `\"not_subject\"` - Not subject to VAT\n- `\"special\"` - Special regime\n\n### Important Notes:\n- All fields except `files[]` are optional\n- `total_value` can be `0` - useful when you want to upload images first and let accountant fill amounts later\n- `category_id` can be omitted - accountant can categorize later via web interface\n- `document_date` defaults to today if not provided\n- The returned `ulid` can be used with detail endpoints like `GET \/api\/v1\/taxpayers\/{taxNumber}\/received\/{documentUlid}\/details`"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 201,
                            "body": "{\n  \"success\": true,\n  \"message\": \"Physical document created successfully with 3 file(s) attached.\",\n  \"data\": {\n    \"ulid\": \"01HN9K8Z6Q2YWXJ3E5M4VFGTH7\",\n    \"document_type\": \"received\",\n    \"total_value\": 150.50,\n    \"vat_type\": \"12\",\n    \"document_date\": \"2026-01-22\",\n    \"files_count\": 3,\n    \"created_at\": \"2026-01-22T10:30:00Z\"\n  }\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Taxpayer not found.\"\n}",
                            "name": ""
                        },
                        {
                            "header": [],
                            "code": 422,
                            "body": "{\n  \"success\": false,\n  \"message\": \"Validation failed.\",\n  \"errors\": {\n    \"files.0\": [\"The file must not be greater than 10240 kilobytes.\"],\n    \"files\": [\"You may not upload more than 5 files.\"],\n    \"vat_type\": [\"Invalid VAT type. Allowed: 0, 5, 12, 13, 14, 15, exempt, not_subject, special.\"]\n  }\n}",
                            "name": ""
                        }
                    ]
                },
                {
                    "name": "Get details of a specific received document",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/:documentUlid\/details",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/:documentUlid\/details",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "documentUlid",
                                    "key": "documentUlid",
                                    "value": "01HQXZ8P9G2K4MNBVCXWERTYU1",
                                    "description": "The unique ULID identifier of the document."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves full details of a specific received document (purchase invoice, credit note, or withholding retention)\nby its unique ULID identifier. This endpoint returns comprehensive data including all related information\nsuch as items, issuer data, payment information, taxes, totals, and associated files.\n\n**This endpoint provides:**\n- Complete document header information (number, dates, status, access key)\n- All document line items with detailed categorization and tax information\n- Complete issuer\/supplier data (name, tax number, email, phone, address)\n- Payment information (methods, amounts, terms)\n- Detailed tax breakdowns by type (IVA 0%, 12%, 15%, etc.)\n- Document totals and calculations\n- Associated files (PDF, XML) with signed URLs\n- For purchase bills: related credit notes\n- Document status and locking information\n- Categorization data and deductibility types\n- Metadata with taxpayer and team context\n\n**How to obtain the document ULID:**\n\nThe ULID can be obtained from:\n- `GET \/api\/v1\/taxpayers\/{taxNumber}\/received` - Field `id` or `ulid` in each document\n- Any other endpoint that lists received documents\n\n**Document Types:**\n- `purchase` - Purchase invoice\/bill (includes items, payments, taxes, totals, credit notes)\n- `credit_note` - Credit note for purchases (includes items, linked to supporting document)\n- `retention` - Withholding retention (includes withholding items and tax calculations)\n\n**Note:** This endpoint uses optimized API Resources that return only essential data,\nunlike UI endpoints which include full taxpayer and team objects."
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"purchase\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU1\",\"type\":\"purchase\",\"document_number\":\"001-001-000000123\",\"status\":\"AUTORIZADO\",\"access_key\":\"1234567890123456789012345678901234567890123456789\",\"issue_date\":\"2024-01-15\",\"authorization_date\":\"2024-01-15 14:30:00\",\"categories\":[\"Servicios B\u00e1sicos\"],\"category_types\":[\"commercial_expenses\"],\"deductible_types\":[\"deductible\"],\"issuer\":{\"name\":\"PROVEEDOR DEMO S.A.\",\"email\":\"proveedor@example.com\",\"tax_number\":\"1790000000001\",\"phone\":\"0999999999\",\"address\":\"Av. Principal 123\",\"forced_to_accounting\":true},\"buyer\":{\"id\":\"1726051285001\",\"id_type\":\"ruc\"},\"payments\":[{\"method\":\"01\",\"amount\":112.00,\"term\":\"0\"}],\"items\":[{\"id\":1,\"description\":\"Servicio de Internet\",\"sku\":\"SRVINT001\",\"quantity\":1,\"price\":100.00,\"discount\":0,\"sub_total\":100.00,\"tax\":12.00,\"tax_type\":\"IVA 12%\",\"total\":112.00,\"category\":{\"id\":5,\"name\":\"Servicios B\u00e1sicos\"},\"deductible_type\":\"deductible\",\"category_message\":null,\"categorized_by\":\"user\"}],\"taxes\":{\"subtotal_vat_twelve\":100.00,\"vat_twelve\":12.00},\"totals\":{\"subtotal\":100.00,\"total\":112.00},\"files\":{\"pdf\":\"https:\/\/s3.amazonaws.com\/...\/document.pdf\",\"xml\":\"https:\/\/s3.amazonaws.com\/...\/document.xml\"},\"credit_notes\":[],\"notes\":\"Observaciones\",\"origin\":\"tws\",\"is_physical\":false,\"is_checked\":true,\"is_locked\":false,\"created_at\":\"2024-01-15T14:30:00+00:00\"},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Purchase Invoice"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"credit_note\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU5\",\"type\":\"credit_note\",\"document_number\":\"001-001-000000124\",\"status\":\"AUTORIZADO\",\"issue_date\":\"2024-01-15\",\"supporting_document\":{\"bill_number\":\"001-001-000000123\",\"emission_date\":\"2024-01-15\"},\"cause\":\"Devoluci\u00f3n de mercader\u00eda\",\"issuer\":{\"name\":\"PROVEEDOR DEMO S.A.\",\"tax_number\":\"1790000000001\"},\"items\":[{\"id\":1,\"description\":\"Producto devuelto\",\"quantity\":1,\"price\":50.00,\"tax\":6.00,\"total\":56.00,\"category\":{\"id\":5,\"name\":\"Inventario\"}}],\"totals\":{\"subtotal\":50.00,\"total\":56.00}},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Credit Note"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\"status\":\"success\",\"message\":\"Document details retrieved successfully\",\"data\":{\"document_type\":\"retention\",\"document\":{\"id\":\"01HQXZ8P9G2K4MNBVCXWERTYU6\",\"type\":\"retention\",\"document_number\":\"001-001-000000125\",\"status\":\"AUTORIZADO\",\"fiscal_period\":\"01\/2024\",\"supporting_documents\":{\"numbers\":\"001-001-000000123\",\"dates\":\"15\/01\/2024\"},\"issuer\":{\"name\":\"PROVEEDOR DEMO S.A.\",\"tax_number\":\"1790000000001\"},\"items\":[{\"id\":1,\"invoice_number\":\"001-001-000000123\",\"tax_type\":\"IVA\",\"tax_base\":100.00,\"percentage\":30,\"amount\":30.00}],\"taxes\":{\"vat\":{\"tax_base\":100.00,\"amount\":30.00,\"percentage\":30},\"rent\":{\"tax_base\":0,\"amount\":0,\"percentage\":0},\"igt\":{\"tax_base\":0,\"amount\":0,\"percentage\":0}},\"files\":{\"pdf\":\"https:\/\/s3.amazonaws.com\/...\/retention.pdf\",\"xml\":\"https:\/\/s3.amazonaws.com\/...\/retention.xml\"}},\"metadata\":{\"taxpayer\":{\"id\":123,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU2\",\"tax_number\":\"1726051285001\"},\"team\":{\"id\":456,\"ulid\":\"01HQXZ8P9G2K4MNBVCXWERTYU3\",\"name\":\"Mi Empresa S.A.\"}}}}",
                            "name": "Success - Withholding Retention"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Document not found or does not belong to this taxpayer\"\n}",
                            "name": "Document Not Found"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\"\n}",
                            "name": "Taxpayer Not Found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving document details\"\n}",
                            "name": "Server Error"
                        }
                    ]
                },
                {
                    "name": "Get status of a specific received document",
                    "request": {
                        "url": {
                            "host": "{{baseUrl}}",
                            "path": "api\/v1\/taxpayers\/:taxNumber\/received\/:documentUlid\/status",
                            "query": [],
                            "raw": "{{baseUrl}}\/api\/v1\/taxpayers\/:taxNumber\/received\/:documentUlid\/status",
                            "variable": [
                                {
                                    "id": "taxNumber",
                                    "key": "taxNumber",
                                    "value": "1726051285001",
                                    "description": "The taxpayer's RUC number (13 digits)."
                                },
                                {
                                    "id": "documentUlid",
                                    "key": "documentUlid",
                                    "value": "01HQXZ8P9G2K4MNBVCXWERTYU1",
                                    "description": "The unique ULID identifier of the document. Can be from purchases, credit notes, or retentions."
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application\/json"
                            },
                            {
                                "key": "x-organization-id",
                                "value": "{YOUR_ORGANIZATION_ID}"
                            }
                        ],
                        "body": null,
                        "description": "Retrieves the current status of a specific received document (purchase, credit note, or withholding retention)\nby its unique ULID identifier. The system will automatically search across all received document types\nand return the status along with the document type.\n\n**How to obtain the document ULID:**\n\nYou can get the document ULID from these endpoints:\n- `GET \/api\/v1\/taxpayers\/{taxNumber}\/received` - Returns purchase invoices with their ULIDs\n- Any other endpoint that lists received documents\n\nThe ULID field is typically returned as `ulid` in the document listing responses.\n\n**Document Types:**\n- `purchase` - Purchase invoice (from bills table)\n- `credit_note` - Purchase credit note (from purchase_credit_notes table)\n- `retention` - Withholding retention (from purchase_withholdings table)\n\n**Status Values:**\n\nFor purchases, credit notes and retentions:\n- `AUTORIZADO` - Authorized document\n- `ANULADO` - Voided\/Cancelled document\n- Other status values depending on the electronic document system"
                    },
                    "response": [
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"purchase\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Purchase Document"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"credit_note\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Credit Note"
                        },
                        {
                            "header": [],
                            "code": 200,
                            "body": "{\n  \"status\": \"success\",\n  \"message\": \"Document status retrieved successfully\",\n  \"data\": {\n    \"document_id\": \"01HQXZ8P9G2K4MNBVCXWERTYU1\",\n    \"document_type\": \"retention\",\n    \"status\": \"AUTORIZADO\",\n    \"metadata\": {\n      \"taxpayer\": {\n        \"id\": 123,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU2\",\n        \"tax_number\": \"1726051285001\"\n      },\n      \"team\": {\n        \"id\": 456,\n        \"ulid\": \"01HQXZ8P9G2K4MNBVCXWERTYU3\",\n        \"name\": \"Mi Empresa S.A.\"\n      }\n    }\n  }\n}",
                            "name": "Success - Withholding Retention"
                        },
                        {
                            "header": [],
                            "code": 401,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Invalid API key or organization ID\"\n}",
                            "name": "Unauthorized - Invalid API Key"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Document not found or does not belong to this taxpayer\"\n}",
                            "name": "Document Not Found"
                        },
                        {
                            "header": [],
                            "code": 404,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"Taxpayer not found\"\n}",
                            "name": "Taxpayer Not Found"
                        },
                        {
                            "header": [],
                            "code": 500,
                            "body": "{\n  \"status\": \"error\",\n  \"message\": \"An error occurred while retrieving document status\"\n}",
                            "name": "Server Error"
                        }
                    ]
                }
            ]
        }
    ],
    "auth": {
        "type": "apikey",
        "apikey": [
            {
                "key": "in",
                "value": "header",
                "type": "string"
            },
            {
                "key": "key",
                "value": "x-api-key",
                "type": "string"
            }
        ]
    }
}